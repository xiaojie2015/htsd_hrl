window.is_frfxz_wxgame = true;var egret = window.egret;function $hitalkJs(t,e){if(window&&window.hitalk_is_game){if(LoadingConst.IS_WXGAME=!1,window.location.protocol.toLowerCase().indexOf("https")>=0&&(LoadingConst.ISHTTPS=!0),!hitalk)return void alert("url error");if("1"==getUrlParameter("https")&&(LoadingConst.ISHTTPS=!0),"1"==getUrlParameter("pc")&&(LoadingConst.IS_PC=!0),!hitalk.loginServer&&window.hitalk_config){var i=hitalk_config.loginServer;0!=i.indexOf("http")&&(i=LoadingConst.HTTP_HEAD+i),hitalk.loginServer=i}return void hitalkOpenSdk.login(0,function(i){i&&(hitalk.urlParam||(hitalk.urlParam={}),i.openid&&(hitalk.urlParam.openid=i.openid)),$setHtgVersion(),t&&t.call(e)},null)}if(LoadingConst.IS_WXGAME=!0,LoadingConst.IS_WX_AUDIT=!0,hitalk={urlParam:{},openid:null,loginServer:"",tversion:"",version:"",xversion:0,errorReport:"",curPlatform:""},window.hitalk=hitalk,hitalk.urlParam={},hitalk.curPlatform=hitalkOpenSdk.curPlatform,hitalkOpenSdk.getLaunchOptionSync(),window.hitalk_config){hitalk_config.ishttps?LoadingConst.ISHTTPS=!0:LoadingConst.ISHTTPS=!1;var i=hitalk_config.loginServer;0!=i.indexOf("http")&&(i=LoadingConst.HTTP_HEAD+i),hitalk.loginServer=i,hitalk.errorReport=hitalk_config.errorReport}var n=getLoginServer()+"/ver/get?r="+Math.random();LoadMyRequest.sendMy(n,function(i){hitalk.xversion=JSON.parse(i).xver;var n=!1;if(n=$isResetLoginServer()){var r=getLoginServer()+"/ver/get?r="+Math.random();LoadMyRequest.sendMy(r,function(i){$getVerComplete(i,t,e)})}else $getVerComplete(i,t,e)})}function $setHtgVersion(){"1"!=getUrlParameter("ver")&&(LoadingConst.VER=getVersion()),LoadingConst.VER_TEMP=getTempVersion(),LoadingConst.VER_TEMP&&""!=LoadingConst.VER_TEMP&&(LoadingConst.VER_TEMP="_"+LoadingConst.VER_TEMP)}function $isResetLoginServer(){var t=!1;return LoadingConst.SERVER_VER_XYX=getXyxVersion(),console.log("是否需要重置服务器地址为测试服:SERVER_VER_XYX="+LoadingConst.SERVER_VER_XYX+",LOCAL_VER_XYX="+LoadingConst.LOCAL_VER_XYX),LoadingConst.LOCAL_VER_XYX>LoadingConst.SERVER_VER_XYX?(hitalk.loginServer=hitalk_config.loginTestServer,hitalk_config.resource=hitalk_config.resourceTest,LoadingConst.configData=hitalk_config,LoadingConst.res_url=LoadingConst.configData.resource,t=!0,console.log("hitalk.loginServer:"+hitalk.loginServer+",LoadingConst.res_url="+LoadingConst.res_url),window.xyxConfig&&(window.xyxConfig.setEnv=1,window.xyxConfig.is_normal=!1)):(window.xyxConfig&&(window.xyxConfig.setEnv=0,window.xyxConfig.is_normal=!0),console.log("进入正式服!")),0!=hitalk.loginServer.indexOf("http")&&(hitalk.loginServer=LoadingConst.HTTP_HEAD+hitalk.loginServer),t}function $getVerComplete(t,e,i){try{var n=JSON.parse(t);if(hitalk.version=n.ver,hitalk.tversion=n.tver,hitalk.xversion=n.xver,$setHtgVersion(),hitalk_config.openid&&""!=hitalk_config.openid)return hitalk.urlParam.code=hitalk_config.openid,hitalk.urlParam.openid=hitalk_config.openid,void(e&&e.call(i));hitalkOpenSdk.login(0,function(t){t&&(hitalk.urlParam||(hitalk.urlParam={}),t.openid&&(hitalk.urlParam.openid=t.openid)),e&&e.call(i),hitalkOpenSdk.reportUserRegisterNew({})},null)}catch(r){alert("getVersion error!")}}function getTempVersion(){return hitalk?hitalk.tversion||"":""}function getVersion(){return hitalk?hitalk.version||"":""}function getXyxVersion(){return hitalk?hitalk.xversion||99999999:99999999}function getAllURLParam(){return hitalk.urlParam?hitalk.urlParam:{}}function getUrlParameter(t){return hitalk?hitalk.urlParam[t]:""}function getLoginServer(){return hitalk?hitalk.loginServer||"":""}function getServerAdd(){if(!loginServer){var t=getLoginServer();loginServer=t+"/client/"}return loginServer}function assembleURLParam(t){return console.log("=====重组前的URL(接口调用)=====,url="+t),t=hitalkOpenSdk.assembleURLParam(t),console.log("=====重组后的URL(接口调用)=====,url="+t),t}function getRecentUrl(t){return getServerAdd()+"recent?"+t+"&cps=0"+(LoadingConst.DEBUG?"&debug=1":"")+(LoadingConst.ISHTTPS?"&isHttps=1":"")}function getUIDUrl(t,e){return getServerAdd()+"uid?id="+t+"&openid="+e+"&cps=0"+(LoadingConst.DEBUG?"&debug=1":"")+"&r="+Math.random()}function getCreatRoleUrl(t,e,i,n,r){return getServerAdd()+"name?id="+t+"&openid="+e+"&channelid="+i+"&cps=0&sex="+n+"&name="+r+(LoadingConst.DEBUG?"&debug=1":"")+"&r="+Math.random()}function getAllServerListUrl(t){return getServerAdd()+"all?openid="+t+"&cps=0"+(LoadingConst.DEBUG?"&debug=1":"")+(LoadingConst.ISHTTPS?"&isHttps=1":"")+"&r="+Math.random()}function getNoticeInfoUrl(t,e,i){return void 0===i&&(i=null),getServerAdd()+"notice?debug=1&ip="+t+"&s="+e+"&r="+Math.random()}function getVersionUrl(){return getLoginServer()+"/ver/get"}function initURLParam(){if(hitalkObj={},LoadingConst.IS_WXGAME)hitalkObj.urlParam={},LoadingConst.configData&&(hitalkObj.loginServer=LoadingConst.configData.loginServer,LoadingConst.ISHTTPS=!!LoadingConst.configData.ishttps,hitalkObj.urlParam.openid=LoadingManager.$inst.userData.threePlatformId);else{window.location.protocol.toLowerCase().indexOf("https:")>=0&&(LoadingConst.ISHTTPS=!0);var t=window.location.search,e={};if(-1!=t.indexOf("?"))for(var i=t.substr(1).split("&"),n=0;n<i.length;n++){var r=i[n].split("=");e[r[0]]=r[1]}e.server?hitalkObj.loginServer=e.server:LoadingConst.configData.loginServer&&(hitalkObj.loginServer=LoadingConst.configData.loginServer),hitalkObj.urlParam=e}}function assembleSelectRoleParams(t,e){var i=LoadingManager.$inst.serverData.id,n=LoadingManager.$inst.userData.threePlatformId,r=LoadingManager.$inst.userData.channel_id,s=encodeURI(t),o=hitalk.urlParam.shareUID,a=hitalk.urlParam.inviteId,h=getCreatRoleUrl(i,n,r,e,s);return h=assembleURLParam(h),o&&(h+="&shareUID="+o),a&&(h+="&inviteId="+a),LoadingConst.IS_GUNFU&&(h+="&gf=1"),h}function isMobile(){var t=window.navigator.userAgent,e=t.toLowerCase().indexOf("android tv"),i=e>=0,n=egret.Capabilities.isMobile;return n&&!i}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,s){function o(t){try{h(n.next(t))}catch(e){s(e)}}function a(t){try{h(n["throw"](t))}catch(e){s(e)}}function h(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(o,a)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,s&&(o=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(s,i[1])).done)return o;switch(s=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,s=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){h.label=i[1];break}if(6===i[0]&&h.label<o[1]){h.label=o[1],o=i;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(i);break}o[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],s=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,s,o,a,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},LoadingBaseItemRenderer=function(t){function e(){var e=t.call(this)||this;return e.skinMyComplete=!1,e._initMyFinish=!1,e.destory=!1,e.currMyStates="",e.preMySelected=!1,e.once(egret.Event.COMPLETE,e.__skinMyCompleteHandler,e),e}return __extends(e,t),e.prototype.__skinMyCompleteHandler=function(t){this.skinMyComplete=!0,this.initMy()},e.prototype.initMy=function(){if(this.skinMyComplete){if(this._initMyFinish=!0,this.destory)return void this.dispose();this.initMyView(),this.initMyEvent(),this.initMyData()}},e.prototype.initMyView=function(){},e.prototype.initMyEvent=function(){},e.prototype.initMyData=function(){},Object.defineProperty(e.prototype,"initFinish",{get:function(){return this._initMyFinish},enumerable:!0,configurable:!0}),e.prototype.invalidateState=function(){t.prototype.invalidateState.call(this),this.currMyStates=this.getCurrentState(),("up"==this.currMyStates||"upAndSelected"==this.currMyStates)&&this.selected!=this.preMySelected&&(this.preMySelected=this.selected,this.selectedChange())},e.prototype.selectedChange=function(){},e.prototype.dispose=function(){this.destory=!0,this.removeEventListener(egret.Event.COMPLETE,this.__skinMyCompleteHandler,this),this.parent&&this.parent.removeChild(this)},e}(eui.ItemRenderer);__reflect(LoadingBaseItemRenderer.prototype,"LoadingBaseItemRenderer");var LoadingMyBaseUI=function(t){function e(e){var i=t.call(this)||this;return i.skinComplete=!1,i._initFinish=!1,i._destory=!1,i._id=e,i.__skinMyCompleteHandler(null),i}return __extends(e,t),e.prototype.__skinMyCompleteHandler=function(t){this.skinComplete=!0,this.init()},e.prototype.init=function(){if(this.skinComplete){if(this._initFinish=!0,this._destory)return void this.dispose();this.initMyView(),this.initMyEvent(),this.initMyData()}},e.prototype.initMyView=function(){},e.prototype.initMyEvent=function(){},e.prototype.initMyData=function(){},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initFinish",{get:function(){return this._initFinish},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destory",{get:function(){return this._destory},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._destory=!0,this.removeEventListener(egret.Event.COMPLETE,this.__skinMyCompleteHandler,this),this.parent&&this.parent.removeChild(this)},e}(eui.Component);__reflect(LoadingMyBaseUI.prototype,"LoadingMyBaseUI");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?n(r):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var hitalk;window.getUrlParameter=getUrlParameter;var LoginMyRecent=function(){function t(){this.destory=!1}return t.prototype.start=function(){LoadingMyFrame.instance.totalMyProg=50,this.injectMyOpenId(),this.loginMyCallBack(getAllURLParam())},t.prototype.injectMyOpenId=function(){var t=hitalkOpenSdk.getUserOpenId();if(t){var e=hitalkOpenSdk.getSN();console.log(e+"渠道--重组openid,重组前openid="+hitalk.urlParam.openid),hitalk.urlParam.openid=t,console.log("玩吧平台--注入openid"+t)}},t.prototype.loginMyCallBack=function(t){if(t&&"undefined"!=t)try{var e="string"==typeof t?JSON.parse(t):t,i=void 0;if(window.dchwFinger&&window.dchwFinger.ImelCode){var n=window.dchwFinger.ImelCode();e.deviceid=n}hitalk.urlParam.devicedebug&&(e.deviceid="12054510278512851246121"),hitalk.urlParam&&hitalk.urlParam.snKey&&(e.snKey=hitalk.urlParam.snKey);for(var r in e)"sn"!==r&&(i?i+="&"+r+"="+e[r]:i=r+"="+e[r]);LoadingMyFrame.instance.totalMyProg=70;var s=getRecentUrl(i);s=assembleURLParam(s),LoadMyRequest.sendMy(s,this.__onGetMyCompleteHandler,this)}catch(o){LoadingMyAlert.show("请尝试切换更好的网络环境!\nError Type:1012",void 0,LoadingMyAlert.YES)}},t.prototype.__onGetMyCompleteHandler=function(t){try{var e=JSON.parse(t),i=e.c||0;if(i==LoadingErrorType.TYPE_1&&e.s){if(this.responseMyData=e,LoadingManager.$inst.loginData=e,LoadingManager.$inst.userData.threePlatformId=this.responseMyData.openid,LoadingManager.$inst.name=hitalkOpenSdk.getUserName()||e.name,LoadingManager.$inst.SERVER_MAX_ID=this.responseMyData.ct||1,this.responseMyData.s=hitalkOpenSdk.changeServerName(this.responseMyData.s),this.serverMyData=this.responseMyData.s[0],LoadingConst.SERVER_NAME=this.serverMyData.an,!this.serverMyData)return void LoadingMyAlert.show(LoadingManager.$inst.getMsgPrompt(LoadingErrorType.TYPE_1006),void 0,LoadingMyAlert.YES);LoadingMyFullView.instance.show(),this.responseMyData.s.length>1||!this.serverMyData.isnew?(LoadingConst.IS_GUNFU=!0,this.loadMyServerFrame()):(LoadingConst.IS_GUNFU=!1,this.startMyGame())}else LoadingMyAlert.show(LoadingManager.$inst.getMsgPrompt(LoadingErrorType.TYPE_1006),void 0,LoadingMyAlert.YES)}catch(n){LoadingMyAlert.show("请尝试切换更好的网络环境!\nError Type:1012",void 0,LoadingMyAlert.YES)}},t.prototype.loadMyServerFrame=function(){LoadingMyFrame.instance.totalMyProg=100,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.__groupMyCompletHandler,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.__groupMyErrorHandler,this),RES.loadGroup(LoadingConst.SELECTSERVER)},t.prototype.__groupMyCompletHandler=function(t){t.groupName==LoadingConst.SELECTSERVER&&this.showMyServerFrame()},t.prototype.__groupMyErrorHandler=function(t){t.groupName==LoadingConst.SELECTSERVER&&(console.info("mp3 load error"),this.showMyServerFrame())},t.prototype.showMyServerFrame=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.__groupMyCompletHandler,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.__groupMyErrorHandler,this);var t=new SelectMyServerFrame;t.show(),LoadingMyFrame.instance.pause(),this.dispose()},t.prototype.__onGetMyIOErrorHandler=function(t){LoadingMyAlert.show("请尝试切换更好的网络环境!\nError Type:1013",void 0,LoadingMyAlert.YES)},t.prototype.startMyGame=function(){if(!this.serverMyData)return void LoadingMyAlert.show("请选择区服!");if(2==this.serverMyData.s&&!LoadingConst.DEBUG)return void LoadingMyAlert.show(LoadingManager.$inst.getMsgPrompt(LoadingErrorType.TYPE_8));if(!LoadingManager.$inst.userData.threePlatformId)return void LoadingMyAlert.show("openId为空!");LoadingManager.$inst.serverData=this.serverMyData;var t=LoadingManager.$inst.userData.threePlatformId,e=this.serverMyData.id,i=getUIDUrl(e,t),n=hitalk.urlParam.snKey,r=hitalk.urlParam.zoneKey;i=assembleURLParam(i),n&&(i+="&snKey="+n),r&&(i+="&zoneKey="+r),LoadMyRequest.sendMy(i,this.__getUidCompleteHandler,this)},t.prototype.__getUidCompleteHandler=function(t){var e=JSON.parse(t);if(e){var i=e.c||0;if(i==LoadingErrorType.TYPE_1)LoadingManager.$inst.uid=parseInt(e.u),LoadingManager.$inst.newbie=e.newbie,LoadingManager.$inst.loginKey=e.k,LoadingManager.$inst.ip=e.cip,LoadingManager.$inst.port=e.cpt,LoadingManager.$inst.enterGame();else{if(i!=LoadingErrorType.TYPE_7)return void LoadingMyAlert.show(LoadingManager.instance.getMsgPrompt(i),void 0,LoadingMyAlert.YES);LoadingManager.$inst.enterSelectRole()}this.dispose()}},t.prototype.__getUidMyErrorHandler=function(t){this.destory||LoadingMyAlert.show("请尝试切换更好的网络环境!\nError Type:1014",void 0,LoadingMyAlert.YES)},t.prototype.dispose=function(){this.destory||(this.destory=!0,this.responseMyData=null,this.serverMyData=null)},t}();__reflect(LoginMyRecent.prototype,"LoginMyRecent");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.creatUserInfoButton=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getUserInfoCompat=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e({}),[2]})})},t.prototype.pay=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.httpRequest=function(t,e,i,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.shareAppMessage=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.onShareAppMessage=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.showShareMenu=function(){},t.prototype.moreGameHandler=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.setClipboardData=function(t,e,i){i()},t.prototype.firstLogin=function(){},t.prototype.loadSubpackage=function(t){loadMainCode(t)},t.prototype.getSystemInfoSync=function(){},t.prototype.transPlayerInfo=function(t){},t.prototype.checkUpdate=function(){},t.prototype.getLaunchOptionSync=function(){},t.prototype.compareTargetVersion=function(t){return-1},t.prototype.previewImage=function(t){},t.prototype.loadTemplate=function(t){},t.prototype.clearCache=function(){},t.prototype.reportLoginInfo=function(){},t.prototype.showAlert=function(t,e,i){},t.prototype.showWxLoading=function(t,e){},t.prototype.hideWxLoading=function(){},t.prototype.showGameClub=function(){},t.prototype.getOpenIosData=function(t,e,i){},t.prototype.gameOnHide=function(t){},t.prototype.gameOnShow=function(t){},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]);var SmallLoading=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){},this.runMyGame()},e.prototype.runMyGame=function(){egret.ImageLoader.crossOrigin="anonymous",LoadingConst.IS_MOBILE=isMobile(),LoadingConst.IS_MOBILE?(egret.TextField.default_fontFamily="SimHei",egret.TextField.default_bold=!1,egret.TextField.offset_size=2):(egret.TextField.default_fontFamily="SimSun",egret.TextField.default_bold=!0,egret.TextField.offset_size=2,egret.DisplayObject.prototype.hitalk$setX=egret.DisplayObject.prototype.$setX,egret.DisplayObject.prototype.hitalk$setY=egret.DisplayObject.prototype.$setY,egret.DisplayObject.prototype.$setX=function(t){return this.hitalk$setX(~~t)},egret.DisplayObject.prototype.$setY=function(t){return this.hitalk$setY(~~t)}),LoadingConst.LOCAL_ROUTE=window.local_route||0,this.flag=0,$hitalkJs(this.getinfo,this),hitalkOpenSdk.checkUpdate(),LoadingConst.IS_MOBILE?(this.stage.scaleMode=egret.StageScaleMode.FIXED_NARROW,this.stage.orientation=egret.OrientationMode.PORTRAIT,this.is60FrameChannel()||(this.stage.frameRate=LoadingConst.MOBILE_FRAME_RATE)):LoadingConst.IS_PC||egret.Capabilities.boundingClientHeight>=868?this.stage.scaleMode=egret.StageScaleMode.NO_SCALE:this.stage.scaleMode=egret.StageScaleMode.FIXED_HEIGHT,console.log(this.stage.frameRate),LoadingMyLayer.instance.initMy(this.stage),LoadingManager.$stage=this.stage,LoadingManager.$inst=LoadingManager.instance,LoadingConst.IS_WXGAME?LoadingConst.configData=hitalk_config:LoadingConst.configData={},this.startLoader()},e.prototype.is60FrameChannel=function(){switch(hitalk.curPlatform){case ChannelType.HWGAME:return!0;default:return!1}},e.prototype.startLoader=function(){LoadingConst.configData.resource&&(LoadingConst.res_url=LoadingConst.configData.resource),LoadingMyLayer.instance.addChild(LoginMyBackView.instance);var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.errorCount=0,LoginMyBackView.instance.start(this.onLoginBackComplete,this),hitalkOpenSdk.getUserInfoCompat(this.stage.width,this.__userInfoComplete.bind(this))},e.prototype.onLoginBackComplete=function(){this.flag|=1,this.flag|=2,this.allComplete()},e.prototype.__userInfoComplete=function(t){return t?(this.flag|=4,LoadingManager.$inst.userData=this.initWxUserInfo(t),void this.allComplete()):(this.errorCount++,void(this.errorCount>5?LoadingMyAlert.show("网络异常，请切换网络进行重试","提示",LoadingMyAlert.YES):LoadingMyAlert.show('连接失败，点击"确定"重新连接',"提示",LoadingMyAlert.YES,this.__reRequestHandler,this)))},e.prototype.__reRequestHandler=function(t){t.confirm&&hitalkOpenSdk.getUserInfoCompat(this.stage.width,this.__userInfoComplete.bind(this))},e.prototype.getinfo=function(){this.flag|=8,this.allComplete()},e.prototype.allComplete=function(){this.flag<15||(LoadingMyFrame.instance.setupMy(),LoadingMyFrame.instance.totalMyProg=10,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("loading.res"+LoadingConst.VER+".json",LoadingConst.res_url))},e.prototype.initWxUserInfo=function(t){var e={};if(t&&t.extend){var i=t.extend;i.platformID&&(e.channel_id=i.platformID),i.openid&&(e.openid=i.openid),i.session_key&&(e.session_key=i.session_key),i.offerId&&(e.offerId=i.offerId),t.materialID&&(e.materialID=t.materialID),t.shareUID&&(e.shareUID=t.shareUID),LoadingConst.configData.threePlatformId&&""!=LoadingConst.configData.threePlatformId?e.threePlatformId=LoadingConst.configData.threePlatformId:t.cmgePlayerId&&(e.threePlatformId=t.cmgePlayerId)}return e},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),LoadingMyFrame.instance.totalMyProg=30,this.__loginMyCallBack()},e.prototype.__loginMyCallBack=function(){!LoadingMyFrame.instance.parent&&LoadingMyLayer.instance.addToMyLayer(LoadingMyFrame.instance),initURLParam(),LoadingConst.DEBUG="1"==getUrlParameter("debug"),(new LoginMyRecent).start(),this.dispose()},e.prototype.__groupLoadErrHandler=function(t){LoadingMyFrame.instance.msgMyTxt.text=LoadingConst.MSG_2},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this)},e}(eui.Group);__reflect(SmallLoading.prototype,"SmallLoading");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function r(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}var o=this;"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl(LoadingConst.res_url+"gameEui"+LoadingConst.VER+".json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ChannelType=function(){function t(){}return t.FP="xkxfs_fp",t.HWGAME="hrl_huawei",t}();__reflect(ChannelType.prototype,"ChannelType");var LoadingConst=function(){function t(){}return Object.defineProperty(t,"ISHTTPS",{get:function(){return t._ISHTTPS},set:function(e){t._ISHTTPS=e,e?t.HTTP_HEAD="https://":t.HTTP_HEAD="http://"},enumerable:!0,configurable:!0}),t.disposeObject=function(t){t&&(t.parent&&t.parent.removeChild(t),t.dispose&&t.dispose())},t.getStringLength=function(t){if(!t||0==t.length)return 0;for(var e,i=0,n=/[\x00-\xff]/,r=0;r<t.length;r++)e=t.charAt(r),i+=n.test(e)?1:2;return i},t.STAGE_WIDTH=540,t.STAGE_HIEGHT=960,t.DEBUG=!1,t.VER="",t.VER_TEMP="",t.SERVER_VER_XYX=99999999,t.LOCAL_VER_XYX=6,t.SERVER_ROUTE=0,t.LOCAL_ROUTE=0,t.HTTP_HEAD="http://",t._ISHTTPS=!1,t.IS_WX_AUDIT=!1,t.DIRECT_SELECT_ROLE=!0,t.IS_PC=!1,t.IS_MOBILE=!1,t.IS_WXGAME=!1,t.IS_QQGAME=!1,t.IS_WANBA=!1,t.MOBILE_FRAME_RATE=30,t.res_url="resource/",t.SELECTSERVER="SelectServerFrame",t.SELECTROLE="SelectRoleFrame",t.PROG_BACK_URL="eui_asset/Loading/loading_prog_back.png",t.PROG_THUMB_URL="eui_asset/Loading/loading_prog.png",t.PROG_THUMB_RUN_URL="eui_asset/Loading/loading_prog_run.png",t.LOADING_BACK_URL="eui_asset/Loading/loading_back.jpg",t.LOADING_BACK_OTHER_URL="eui_asset/Loading/loading_back_other.jpg",t.LOADING_BACK_PC_URL="eui_asset/Loading/loading_back_pc.png",t.LOADING_BACK_PC_OTHER_URL="eui_asset/Loading/loading_back_pc_other.png",t.LOADING_BIG_BACK_PC_URL="eui_asset/Loading/loading_big_back_pc.jpg",t.LOADING_AWY_URL="eui_asset/Loading/loading_awy.jpg",t.LOADING_QQHALL_URL="eui_asset/Loading/loading_qqhall.jpg",t.LOADING_QQGAME_GUIDE_URL="eui_asset/Loading/loading_qqgame_guide.png",t.PROG_BACK="loading_prog_back",t.PROG_THUMB="loading_prog",t.PROG_THUMB_RUN="loading_prog_run",t.LOADING_BG="loading_bg",t.LOADING_BANNER="loading_banner",t.LOADING_BIG_BACK="loading_big_back_pc",t.LOADING_CR_BIG_BACK="loading_cr_big_back_pc",t.LOADING_QQGAME_GUIDE="loading_qqgame_guide",t.LOADING_GROUP="LoadingFrame",t.USERAGREE_GROUP="UserAgreement",t.NOTICE_GROUP="NoticeGroup",t.MSG_1="首次加载时间较长请耐心等待...",t.MSG_2="加载资源组错误!!!请检查网络",t.MSG_3="暂无区服列表",t.MSG_4="选择区服",t.MSG_5="点击选服",t.PRELOAD_SKILL_EFFECT="skill_fsj999_1",t.NEWBIE="NewbieFrame",t.NICK_NAME="NickNameGroup",t.VERSION="版本号：1.",t.SELECT_SERVER_TIP="正在请求区服...",t.SERVER_NAME="",t.HISTORY_SERVER="历史服务器",t.SERVER="服",t.GET_ERROR="获取区服列表失败!",t.NOTICE_ISNULL="暂未有更新的公告",t}();__reflect(LoadingConst.prototype,"LoadingConst");var loginServer;window.getOpenIdUrl=function(t){return getServerAdd()+"loginCheck?cps=0"+t+(LoadingConst.DEBUG?"&debug=1":"")+(LoadingConst.ISHTTPS?"&isHttps=1":"")+"&r="+Math.random()};var hitalkObj,LoadingErrorType=function(){function t(){}return t.TYPE_1=1,t.TYPE_2=2,t.TYPE_3=3,t.TYPE_4=4,t.TYPE_5=5,t.TYPE_6=6,t.TYPE_7=7,t.TYPE_8=8,t.TYPE_9=9,t.TYPE_10=10,t.TYPE_11=11,t.TYPE_1000=1e3,t.TYPE_1001=1001,t.TYPE_1002=1002,t.TYPE_1003=1003,t.TYPE_1004=1004,t.TYPE_1005=1005,t.TYPE_1006=1006,t}();__reflect(LoadingErrorType.prototype,"LoadingErrorType");var LoadingMyLayer=function(t){function e(){var i=this;if(!e._instance)return i=t.call(this)||this,e._instance=i,i}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||new e},enumerable:!0,configurable:!0}),e.prototype.initMy=function(t){t&&(this._currMyStage=t,this.touchEnabled=!1,this._blackMyGoundList=[],this._alphaMyGoundList=[],this._currMyStage.addEventListener(egret.Event.RESIZE,this.__resizeMyHandler,this),this._currMyStage.addChild(this))},e.prototype.addToMyLayer=function(t,e){void 0===e&&(e=0),1==e?(-1!=this._blackMyGoundList.indexOf(t)&&this._blackMyGoundList.splice(this._blackMyGoundList.indexOf(t),1),this._blackMyGoundList.push(t)):2==e&&(-1!=this._alphaMyGoundList.indexOf(t)&&this._alphaMyGoundList.splice(this._alphaMyGoundList.indexOf(t),1),this._alphaMyGoundList.push(t)),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.__childMyRemoveedFromStageHandler,this),this.addChild(t),this.arrangeMyBlockGound()},e.prototype.__childMyRemoveedFromStageHandler=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.__childMyRemoveedFromStageHandler,this),-1!=this._blackMyGoundList.indexOf(e)&&this._blackMyGoundList.splice(this._blackMyGoundList.indexOf(e),1),-1!=this._alphaMyGoundList.indexOf(e)&&this._alphaMyGoundList.splice(this._alphaMyGoundList.indexOf(e),1),this.arrangeMyBlockGound()},e.prototype.arrangeMyBlockGound=function(){this._blackMyGound&&this._blackMyGound.parent&&this._blackMyGound.parent.removeChild(this._blackMyGound),this._alphaMyGound&&this._alphaMyGound.parent&&this.alphaMyGound.parent.removeChild(this._alphaMyGound);var t,e;this._blackMyGoundList.length>0&&(t=this._blackMyGoundList[this._blackMyGoundList.length-1],e=this.getChildIndex(t),this.addChildAt(this.blackMyGound,e)),this._alphaMyGoundList.length>0&&(t=this._alphaMyGoundList[this._alphaMyGoundList.length-1],e=this.getChildIndex(t),this.addChildAt(this.alphaMyGound,e))},Object.defineProperty(e.prototype,"blackMyGound",{get:function(){return this._blackMyGound||(this._blackMyGound=new egret.Sprite,this._blackMyGound.touchEnabled=!0),(this._bgw!=this._currMyStage.stageWidth||this._bgh!=this._currMyStage.stageHeight)&&(this._bgw=this._currMyStage.stageWidth,this._bgh=this._currMyStage.stageHeight,this._blackMyGound.graphics.clear(),this._blackMyGound.graphics.beginFill(0,.6),this._blackMyGound.graphics.drawRect(0,0,this._bgw,this._bgh),this._blackMyGound.graphics.endFill()),this._blackMyGound},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaMyGound",{get:function(){return this._alphaMyGound||(this._alphaMyGound=new egret.Sprite,this._alphaMyGound.touchEnabled=!0),(this._agw!=this._currMyStage.stageWidth||this._agh!=this._currMyStage.stageHeight)&&(this._agw=this._currMyStage.stageWidth,this._agw=this._currMyStage.stageHeight,this._alphaMyGound.graphics.clear(),this._alphaMyGound.graphics.beginFill(0,0),this._alphaMyGound.graphics.drawRect(0,0,this._agw,this._agh),this._alphaMyGound.graphics.endFill()),this._alphaMyGound},enumerable:!0,configurable:!0}),e.prototype.__resizeMyHandler=function(t){this._blackMyGound&&this._blackMyGound.parent&&this.blackMyGound,this._alphaMyGound&&this._alphaMyGound.parent&&this.alphaMyGound},e.prototype.dispose=function(){for(var t=this.numChildren,i=0;t>i;i++)this.removeChild(this.getChildAt(0));this._alphaMyGound&&this._alphaMyGound.graphics.clear(),this._alphaMyGound=null,this._blackMyGound&&this._blackMyGound.graphics.clear(),this._blackMyGound=null,this._alphaMyGoundList=null,this._blackMyGoundList=null,e._instance=null,this._currMyStage=null,this.parent&&this.parent.removeChild(this)},e}(eui.UILayer);__reflect(LoadingMyLayer.prototype,"LoadingMyLayer");var LoadingManager=function(){function t(){t._instance||(t._instance=this)}return Object.defineProperty(t,"instance",{get:function(){return this._instance||new t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allTemplateData",{get:function(){return this._allTemplateData},set:function(t){this._allTemplateData?t.attrtemp?this._allTemplateData.attrtemp?this.oto(t.attrtemp,this._allTemplateData.attrtemp):this._allTemplateData.attrtemp=t.attrtemp:this.oto(t,this._allTemplateData):this._allTemplateData=t},enumerable:!0,configurable:!0}),t.prototype.oto=function(t,e){for(var i in t)e[i]=t[i]},t.prototype.getNickNameBySex=function(t){var e="";if(!this.fistName){var i=RES.getRes("nick_name_lib_json");i&&(this.fistName=i.fistName.split(","),this.manName=i.manName.split(","),this.womenName=i.womenName.split(","))}if(this.fistName&&this.fistName.length>0){var n=Math.floor(Math.random()*this.fistName.length);e+=this.fistName[n];var r=1==t?this.manName:this.womenName;n=Math.floor(Math.random()*r.length),e+=r[n]}return e},t.prototype.getMsgPrompt=function(t){switch(t){case LoadingErrorType.TYPE_1:return"成功!";case LoadingErrorType.TYPE_2:return"创角太频繁!";case LoadingErrorType.TYPE_3:return"角色名已存在!";case LoadingErrorType.TYPE_5:return"连接服务器失败!";case LoadingErrorType.TYPE_6:case LoadingErrorType.TYPE_11:return"已被封号!";case LoadingErrorType.TYPE_7:return"玩家未创建角色!";case LoadingErrorType.TYPE_8:return"服务器维护中!";case LoadingErrorType.TYPE_9:return"服务器尚未开放!";case LoadingErrorType.TYPE_1000:return"";case LoadingErrorType.TYPE_1001:return"角色名为空!";case LoadingErrorType.TYPE_4:case LoadingErrorType.TYPE_1002:return"角色名含有非法字符!";case LoadingErrorType.TYPE_1003:return"角色名过短!";case LoadingErrorType.TYPE_1004:return"角色名过长!";case LoadingErrorType.TYPE_1005:return"您需要同意用户协议才能开始游戏";case LoadingErrorType.TYPE_1006:return"找不到历史服务器!";default:return"参数或服务器内部错误!"}},t.prototype.enterSelectRole=function(){if(t.$inst.newbie=!1,LoadingConst.DIRECT_SELECT_ROLE){var e=new DirectSelectRole;return void e.createName()}},t.prototype.__loadSelectRoleHandler=function(){var t=new SelectMyRoleFrame;t.show(),LoadingMyFrame.instance.pause()},t.prototype.enterGame=function(){var t=[];t.push({type:5,url:""}),t.push({type:8,url:"default.res"+LoadingConst.VER+".json",root:LoadingConst.res_url}),t.push({type:6,url:LoadingConst.res_url+"default.thm"+LoadingConst.VER+".json"}),t.push({type:1,groupName:"preload"}),this.newbie||(t.push({type:1,groupName:LoadingConst.NEWBIE}),t.push({type:1,groupName:LoadingConst.NICK_NAME}));var e=LoadingConst.ISHTTPS?"https://":"http://",i=e+this.serverData.tpurl+"/temp/tempInfos1"+LoadingConst.VER_TEMP+".json";t.push({type:3,url:i,ver:LoadingConst.VER,index:1}),i=e+this.serverData.tpurl+"/temp/tempInfos2"+LoadingConst.VER_TEMP+".json",t.push({type:3,url:i,ver:LoadingConst.VER,index:2}),i=e+this.serverData.tpurl+"/temp/tempInfos3"+LoadingConst.VER_TEMP+".json",t.push({type:3,url:i,ver:LoadingConst.VER,index:3}),i=e+this.serverData.tpurl+"/temp/tempInfos4"+LoadingConst.VER_TEMP+".json",t.push({type:3,url:i,ver:LoadingConst.VER,index:4}),LoadingMyFrame.instance.load(t,this.__loadCompleteHandler,this)
},t.prototype.__loadCompleteHandler=function(){var t=egret.getDefinitionByName("LoginManager");t&&t.instance.enterGame(this.allTemplateData),LoadingMyFrame.instance.dispose(),LoginMyBackView.instance.dispose(),LoadingMyAlert.instance.dispose(),LoadingMyLayer.instance.dispose(),LoadingMyFullView.instance.dispose(),this.dispose()},t.prototype.dispose=function(){this.name=null,this.loginData=null,this.loginKey=null,this.fistName&&(this.fistName.length=0),this.fistName=null,this.manName&&(this.manName.length=0),this.manName=null,this.womenName&&(this.womenName.length=0),this.womenName=null,this.uid=null,this.newbie=null,this.ip=null,this.port=null,this.serverData=null,this.isNew=null,this._allTemplateData=null,this.SERVER_MAX_ID=null,t._instance=null,t.$stage=null,t.$inst=null},t}();__reflect(LoadingManager.prototype,"LoadingManager");var LoadMyRequest=function(){function t(){this.errorMyMax=6,this._errorMyCount=0}return t.prototype.sendMy=function(t,e,i){this._requestMy||(this._completeMy=e,this._thisMyObj=i,this._urlMy=t,this._requestMy=new egret.HttpRequest,this._requestMy.responseType=egret.HttpResponseType.TEXT,this._requestMy.addEventListener(egret.Event.COMPLETE,this.__completeMyHandler,this),this._requestMy.addEventListener(egret.IOErrorEvent.IO_ERROR,this.__iOErrorMyHandler,this),this.sendMyHandler())},t.sendMy=function(e,i,n){(new t).sendMy(e,i,n)},t.prototype.sendMyHandler=function(){if(this._requestMy){if(this._errorMyCount++,this._errorMyCount>=this.errorMyMax)return void this.completeMyCall(null);this._timerMy=setTimeout(function(){this._request&&(this._request.abort(),this.sendHandler())},5e3),this._requestMy.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._requestMy.open(this._urlMy,egret.HttpMethod.GET),this._requestMy.send()}},t.prototype.__completeMyHandler=function(t){this.completeMyCall(this._requestMy.response)},t.prototype.__iOErrorMyHandler=function(t){var e=this;this._errorMyCount++,clearTimeout(this._timerMy),this._errorMyCount<this.errorMyMax?setTimeout(function(){e.sendMyHandler()},100):this.completeMyCall(null)},t.prototype.completeMyCall=function(t){clearTimeout(this._timerMy),this._requestMy.removeEventListener(egret.Event.COMPLETE,this.__completeMyHandler,this),this._requestMy.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.__iOErrorMyHandler,this),this._requestMy=null,this._completeMy&&this._completeMy.call(this._thisMyObj,t),this._completeMy=null,this._thisMyObj=null},t}();__reflect(LoadMyRequest.prototype,"LoadMyRequest");var FloatMyButton=function(t){function e(){var e=t.call(this)||this;return e._defAlpha=.75,e._touchStatus=!1,e._moveStatus=!1,e._dx=0,e._dy=0,e.source="resource/icons/channelChaos/returnBtn.png",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.initMy,e),e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||new e},enumerable:!0,configurable:!0}),e.prototype.initMy=function(){this.initMyView(),this.initMyEvent()},e.prototype.initMyView=function(){this.x=this.stage.stageWidth-68,this.y=80,this.alpha=this._defAlpha},e.prototype.initMyEvent=function(){this.touchEnabled=!0,this._touchStatus=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseMyDown,this)},e.prototype.mouseMyDown=function(t){this._startTime=(new Date).getTime(),this._moveStatus=!1,this._dx=t.stageX-this.x,this._dy=t.stageY-this.y,this.alpha=1,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMyMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseMyUp,this)},e.prototype.mouseMyMove=function(t){this._touchStatus&&(this.x=t.stageX-this._dx,this.y=t.stageY-this._dy,this._moveStatus=!0)},e.prototype.mouseMyUp=function(t){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMyMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.mouseMyUp,this);var e=(new Date).getTime(),i=e-this._startTime;100>i&&!this._moveStatus?this.onClickMyClose():this.moveToSide(),this._moveStatus=!1},e.prototype.onClickMyClose=function(){hitalkOpenSdk.closeWebView()},e.prototype.moveToSide=function(){var t=this;this._touchStatus=!1;var e=this.getMyGoalX(),i=200*Math.abs(this.x-e)/300;egret.Tween.get(this).to({x:e},i).call(function(){t._touchStatus=!0}).to({alpha:this._defAlpha},200)},e.prototype.getMyGoalX=function(){var t=0,e=this.stage.stageWidth-this.width,i=t-this._dx,n=e-this._dx,r=Math.abs(this.x-n)>Math.abs(this.x-i)?i:n;return r=t>r?t:e},e._instance=null,e}(eui.Image);__reflect(FloatMyButton.prototype,"FloatMyButton");var LoadingMyAlert=function(t){function e(){var i=t.call(this,"LoadingAlert")||this;return e._instance?i:(e._instance=i,i)}return __extends(e,t),e.prototype.createMyView=function(){this.touchEnabled=!1,this.width=435,this.height=250,this.horizontalCenter=0,this.verticalCenter=0,this.backMyImg=new eui.Image,this.backMyImg.touchEnabled=!1,this.backMyImg.percentWidth=100,this.backMyImg.percentHeight=100,this.backMyImg.source="loading_json.alert_borderbg_png",this.addChild(this.backMyImg),this.titleMyLab=new eui.Label,this.titleMyLab.textAlign="center",this.titleMyLab.size=20,this.titleMyLab.text="",this.titleMyLab.textColor=3291214,this.titleMyLab.touchEnabled=!1,this.titleMyLab.width=212,this.titleMyLab.height=20,this.titleMyLab.x=116,this.titleMyLab.y=35,this.addChild(this.titleMyLab),this.contextMyLab=new eui.Label,this.contextMyLab.textAlign="center",this.contextMyLab.verticalAlign="middle",this.contextMyLab.lineSpacing=5,this.contextMyLab.size=18,this.contextMyLab.text="",this.contextMyLab.textColor=3291214,this.contextMyLab.touchEnabled=!1,this.contextMyLab.width=380,this.contextMyLab.height=100,this.contextMyLab.x=28,this.contextMyLab.y=62,this.addChild(this.contextMyLab),this.yesMyBtn=new eui.Button,this.yesMyBtn.skinName=this.getMyYesAndNoBtnSkin(),this.yesMyBtn.icon="loading_json.alert_confirm_png",this.yesMyBtn.x=257,this.yesMyBtn.y=170,this.addChild(this.yesMyBtn),this.noMyBtn=new eui.Button,this.noMyBtn.skinName=this.getMyYesAndNoBtnSkin(),this.noMyBtn.icon="loading_json.alert_cancel_png",this.noMyBtn.x=90,this.noMyBtn.y=170,this.addChild(this.noMyBtn)},e.prototype.getMyYesAndNoBtnSkin=function(){var t=new eui.Skin;t.skinParts=["iconDisplay","labelDisplay"];var e=new eui.Image;e.touchEnabled=!1,t.iconDisplay=e;var i=new eui.Label;return i.textAlign="center",i.size=18,i.textColor=3291214,i.touchEnabled=!1,i.percentWidth=100,i.height=18,i.x=0,i.y=12,t.labelDisplay=i,t.elementsContent=[e,i],t.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("iconDisplay","x",1),new eui.SetProperty("iconDisplay","y",1),new eui.SetProperty("iconDisplay","scaleX",.96),new eui.SetProperty("iconDisplay","scaleY",.96)]),new eui.State("disabled",[])],t},Object.defineProperty(e,"instance",{get:function(){return this._instance||new e},enumerable:!0,configurable:!0}),e.prototype.initMyView=function(){this.createMyView(),this._btnArr=[],this.titleMyLab.text="提示",this.noMyBtn.label="取消",this.yesMyBtn.label="确定"},e.prototype.initMyEvent=function(){this.noMyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__cancelMyClickHandler,this),this.yesMyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__confirmMyClickHandler,this)},e.prototype.removeMyEvent=function(){this.noMyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__cancelMyClickHandler,this),this.yesMyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__confirmMyClickHandler,this)},e.show=function(t,i,n,r,s,o,a){void 0===r&&(r=null),void 0===s&&(s=null),void 0===a&&(a=null),i||(i="提示"),n||(n=e.YES|e.NO),this.instance.showMy(t,i,n,r,s,o,a)},e.prototype.showMy=function(t,i,n,r,s,o,a){this._confirmMyCall=r,this._cancelMyCall=a,this._thisMyObj=s,this._callMyArg=o,this.titleMyLab.text=i,this.setMyContext(t),this.noMyBtn.parent&&this.noMyBtn.parent.removeChild(this.noMyBtn),this.yesMyBtn.parent&&this.yesMyBtn.parent.removeChild(this.yesMyBtn),this._btnArr.length=0,n&e.NO&&this._btnArr.push(this.noMyBtn),n&e.YES&&this._btnArr.push(this.yesMyBtn);for(var h=this._btnArr.length,l=(this.width-6-88*h)/(h+1),y=0;h>y;y++){var d=this._btnArr[y];d.x=l+(88+l)*y,this.addChild(d)}LoadingMyLayer.instance.addToMyLayer(this,1)},e.prototype.setMyContext=function(t){t=void 0==t||null==t?"":t.toString(),t.indexOf("</")>=0?this.contextMyLab.textFlow=(new egret.HtmlTextParser).parser(t):this.contextMyLab.text=t,this.contextMyLab.parent||this.addChild(this.contextMyLab)},e.prototype.__cancelMyClickHandler=function(t){var e=this._cancelMyCall,i=this._thisMyObj,n=this._callMyArg;this.hide(),e&&(n?e.apply(i,n):e.call(i))},e.prototype.__confirmMyClickHandler=function(t){var e=this._confirmMyCall,i=this._thisMyObj,n=this._callMyArg;this.hide(),e&&(n?e.apply(i,n):e.call(i))},e.prototype.hide=function(){this._confirmMyCall=null,this._cancelMyCall=null,this._thisMyObj=null,this._callMyArg=null,this.parent&&this.parent.removeChild(this),this._btnArr.length=0},e.prototype.dispose=function(){this.removeMyEvent(),this.hide(),LoadingConst.disposeObject(this.titleMyLab),this.titleMyLab=null,LoadingConst.disposeObject(this.yesMyBtn),this.yesMyBtn=null,LoadingConst.disposeObject(this.noMyBtn),this.noMyBtn=null,LoadingConst.disposeObject(this.contextMyLab),this.contextMyLab=null,LoadingConst.disposeObject(this.backMyImg),this.backMyImg=null,t.prototype.dispose.call(this)},e._instance=null,e.YES=1,e.NO=2,e}(LoadingMyBaseUI);__reflect(LoadingMyAlert.prototype,"LoadingMyAlert");var LoadingMyFullView=function(t){function e(){var i=this;if(!e._instance)return i=t.call(this)||this,e._instance=i,i.initMyEvent(),i.initMyData(),i}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||new e},enumerable:!0,configurable:!0}),e.prototype.initMyEvent=function(){LoadingManager.$stage.addEventListener(egret.Event.RESIZE,this.__resizeMyHandler,this)},e.prototype.removeEvent=function(){LoadingManager.$stage.removeEventListener(egret.Event.RESIZE,this.__resizeMyHandler,this)},e.prototype.initMyData=function(){var t=LoginMyBackView.instance.getTextureMyByName(LoadingConst.LOADING_BIG_BACK);this.texture=t,this.fillMode=egret.BitmapFillMode.SCALE,this.updateMyView()},e.prototype.updateMyBigBg=function(t){var e=LoginMyBackView.instance.getTextureMyByName(t);this.texture=e},e.prototype.updateMyView=function(){this.texture&&(this.x=(LoadingManager.$stage.stageWidth-this.width)/2,this.y=LoadingManager.$stage.stageHeight-this.height)},e.prototype.__resizeMyHandler=function(t){this.updateMyView()},e.prototype.show=function(){LoadingMyLayer.instance.addChildAt(this,0)},e.prototype.dispose=function(){this.removeEvent(),this.texture=null,this.parent&&this.parent.removeChild(this),e._instance=null},e}(egret.Bitmap);__reflect(LoadingMyFullView.prototype,"LoadingMyFullView");var LoadingMyMeanEffect=function(t){function e(){var e=t.call(this)||this;return e._ttrMyArr=[],e._startMyTime=0,e._tempMyTime=0,e._frameMySize=0,e._horizontalMyAlign=egret.HorizontalAlign.LEFT,e._verticalMyAlign=egret.VerticalAlign.TOP,e._preMyTime=0,e._loopMy=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.playingMy=!1,this._bmpMy=new egret.Bitmap,this._bmpMy.touchEnabled=!1,this.addChild(this._bmpMy)},e.prototype.textureMyData=function(t,e,i){void 0===e&&(e=100),void 0===i&&(i=0),t&&0!=t.length&&(this._ttrMyArr=t,this._intervalMy=e,this._loopMy=i,this._frameMySize=this._ttrMyArr.length,this._ttrMyArr.length>0&&(this.width=this._ttrMyArr[0].textureWidth,this.height=this._ttrMyArr[0].textureHeight))},e.prototype.playMy=function(t){void 0===t&&(t=0),this._startMyTime=egret.getTimer(),this._preMyTime=0,this._loopMy=t,this.playingMy=!0,LoadingManager.$stage.addEventListener(egret.Event.ENTER_FRAME,this.__enterMyFrameHandler,this)},e.prototype.stopMy=function(){this.playingMy=!1,LoadingManager.$stage.removeEventListener(egret.Event.ENTER_FRAME,this.__enterMyFrameHandler,this)},e.prototype.__enterMyFrameHandler=function(t){if(!(this._frameMySize<=0)){this._tempMyTime=egret.getTimer();var e=this._tempMyTime-this._startMyTime;if(!(0>e||this._tempMyTime-this._preMyTime<this._intervalMy))return this._preMyTime=this._tempMyTime,this._currMyFrame=Math.floor(e/this._intervalMy),this._loopMy>0&&this._currMyFrame/this._frameMySize>=this._loopMy?(this.stopMy(),void this.dispatchEventWith(egret.Event.COMPLETE)):void(this._bmpMy.texture=this._ttrMyArr[this._currMyFrame%this._frameMySize])}},e.prototype.dispose=function(){this.stopMy(),this.alpha=1,this.parent&&this.parent.removeChild(this),this._bmpMy&&(this._bmpMy.texture=null,this._bmpMy.parent&&this._bmpMy.parent.removeChild(this._bmpMy),this._bmpMy=null),this._ttrMyArr&&(this._ttrMyArr.length=0),this._ttrMyArr=null},e.prototype.getTextureArr=function(t,e){if(!t||0>=e)return null;for(var i=t.textureWidth/e,n=t.textureHeight,r=[],s=new egret.Rectangle,o=0;e>o;o++)s.x=i*o,s.y=0,s.width=i,s.height=n,r.push(this.drawToTexture(t,s));return r},e.prototype.drawToTexture=function(t,e){var i;if(t instanceof egret.Bitmap)i=t.texture;else{if(!(t instanceof egret.Texture))return null;i=t}var n=new egret.Texture;return n.bitmapData=i.bitmapData,n.$initData(i.$bitmapX+e.x,i.$bitmapY+e.y,e.width,e.height,0,0,e.width,e.height,i.$sourceWidth,i.$sourceHeight),n},e}(eui.Component);__reflect(LoadingMyMeanEffect.prototype,"LoadingMyMeanEffect");var DirectSelectRole=function(){function t(){this.maxRetryCount=5,this.retryCount=0,this.init()}return t.prototype.init=function(){this.request=new egret.HttpRequest,this.request.responseType=egret.HttpResponseType.TEXT,this.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.request.addEventListener(egret.Event.COMPLETE,this.__onCompleteHandler,this),this.request.addEventListener(egret.IOErrorEvent.IO_ERROR,this.__onIOErrorHandler,this)},t.prototype.createName=function(){this.userName=this.generateName();var t=assembleSelectRoleParams(this.userName,1);this.request.open(t,egret.HttpMethod.GET),this.request.send()},t.prototype.retry=function(){return this.retryCount++,this.retryCount<=this.maxRetryCount?void this.createName():void this.updateMsg(this.code)},t.prototype.generateName=function(){var t="",e=String.fromCharCode(this.randomFrom(65,90)),i=(new Date).getTime().toString();return t=e+i.substring(i.length-11,i.length)},t.prototype.randomFrom=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t.prototype.updateMsg=function(t){void 0===t&&(t=1e3);var e=LoadingManager.instance.getMsgPrompt(t);LoadingMyAlert.show(e,"提示",LoadingMyAlert.YES)},t.prototype.__onCompleteHandler=function(t){var e=JSON.parse(this.request.response);if(console.log("起名结果返回:"+JSON.stringify(e)),e){var i=e.c||0;this.code=i,i!=LoadingErrorType.TYPE_1?this.retry():(LoadingManager.$inst.uid=parseInt(e.u),LoadingManager.$inst.loginKey=e.k,LoadingManager.$inst.ip=e.cip,LoadingManager.$inst.port=e.cpt,LoadingManager.$inst.isNew=!0,LoadingMyFrame.instance.setupMy(),LoadingManager.$inst.enterGame())}},t.prototype.__onIOErrorHandler=function(t){this.code=LoadingErrorType.TYPE_5,this.retry()},t.prototype.dispose=function(){this.request&&(this.request.removeEventListener(egret.Event.COMPLETE,this.__onCompleteHandler,this),this.request.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.__onIOErrorHandler,this)),this.request=null},t}();__reflect(DirectSelectRole.prototype,"DirectSelectRole");var SelectMyRoleFrame=function(t){function e(){var e=t.call(this,"SelectRoleFrame")||this;return e.MAX_TIME=30,e.initMyName=!1,e}return __extends(e,t),e.prototype.createMyView=function(){this.width=LoadingConst.STAGE_WIDTH,this.height=LoadingConst.STAGE_HIEGHT,this.verticalCenter=0,this.horizontalCenter=0,this.roleMyImg_1=new eui.Image,this.roleMyImg_1.touchEnabled=!1,this.roleMyImg_1.x=this.roleMyImg_1.y=0,this.roleMyImg_1.horizontalCenter=0,this.addChild(this.roleMyImg_1),this.roleMyImg_2=new eui.Image,this.roleMyImg_2.touchEnabled=!1,this.roleMyImg_2.x=this.roleMyImg_2.y=0,this.roleMyImg_2.horizontalCenter=0,this.addChild(this.roleMyImg_2),this.enterMyGameBtn=new eui.Button,this.enterMyGameBtn.skinName=this.getStartMyGameBtnSkin(),this.enterMyGameBtn.width=219,this.enterMyGameBtn.height=73,this.enterMyGameBtn.x=96,this.enterMyGameBtn.y=696,this.addChild(this.enterMyGameBtn),this.manMyBtn=new eui.Image,this.manMyBtn.source="selectrole_json.select_role_sel2_png",this.manMyBtn.verticalCenter=130,this.manMyBtn.horizontalCenter=-60,this.addChild(this.manMyBtn),this.womanMyBtn=new eui.Image,this.womanMyBtn.source="selectrole_json.select_role_unsel1_png",this.womanMyBtn.verticalCenter=130,this.womanMyBtn.horizontalCenter=60,this.addChild(this.womanMyBtn),this.nameMyBackImg=new eui.Image,this.nameMyBackImg.touchEnabled=!1,this.nameMyBackImg.source="selectrole_json.select_role_namebg_png",this.nameMyBackImg.x=54,this.nameMyBackImg.y=636,this.addChild(this.nameMyBackImg),this.nameMyTxtImg=new eui.Image,this.nameMyTxtImg.touchEnabled=!1,this.nameMyTxtImg.source="selectrole_json.select_role_txt_png",this.nameMyTxtImg.x=116,this.nameMyTxtImg.y=652,this.addChild(this.nameMyTxtImg),this.nickMyNameTxt=new eui.EditableText,this.nickMyNameTxt.maxChars=12,this.nickMyNameTxt.size=20,this.nickMyNameTxt.text="",this.nickMyNameTxt.textAlign="center",this.nickMyNameTxt.textColor=3291214,this.nickMyNameTxt.verticalAlign="middle",this.nickMyNameTxt.width=300,this.nickMyNameTxt.x=98,this.nickMyNameTxt.y=650,this.addChild(this.nickMyNameTxt),this.randomMyBtn=new eui.Button,this.randomMyBtn.x=384,this.randomMyBtn.y=636,this.randomMyBtn.skinName=this.getRandowmMyBtnSkin(),this.addChild(this.randomMyBtn),this.msgMyTxt=new eui.Label,this.msgMyTxt.size=16,this.msgMyTxt.textAlign="center",this.msgMyTxt.textColor=13959168,this.msgMyTxt.touchEnabled=!1,this.msgMyTxt.width=250,this.msgMyTxt.height=16,this.msgMyTxt.x=123,this.msgMyTxt.y=615,this.addChild(this.msgMyTxt),this.timeEndMyTxt=new eui.Label,this.timeEndMyTxt.size=16,this.timeEndMyTxt.textAlign="center",this.timeEndMyTxt.textColor=13959168,this.timeEndMyTxt.touchEnabled=!1,this.timeEndMyTxt.width=250,this.timeEndMyTxt.height=16,this.timeEndMyTxt.x=123,this.timeEndMyTxt.y=790,this.addChild(this.timeEndMyTxt),LoadingMyFullView.instance.updateMyBigBg(LoadingConst.LOADING_CR_BIG_BACK),LoginMyBackView.instance.updateMyBanner(0),this.isHideMySexUI()},e.prototype.getStartMyGameBtnSkin=function(){var t=new eui.Skin;t.skinParts=["mcDisplay"];var e=new eui.Group;e.touchChildren=!1,e.touchEnabled=!1;var i=new egret.Bitmap;return i.touchEnabled=!1,i.texture=RES.getRes("selectrole_json.select_role_enter_png"),t.mcDisplay=e,t.back=i,t.mcDisplay.x=-30,t.mcDisplay.y=-2,t.elementsContent=[i,e],t.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("mcDisplay","x",-18),new eui.SetProperty("mcDisplay","y",2),new eui.SetProperty("mcDisplay","scaleX",.92),new eui.SetProperty("mcDisplay","scaleY",.92),new eui.SetProperty("back","x",12),new eui.SetProperty("back","y",4),new eui.SetProperty("back","scaleX",.92),new eui.SetProperty("back","scaleY",.92)]),new eui.State("disabled",[])],t},e.prototype.getRandowmMyBtnSkin=function(){var t=new eui.Skin;t.skinParts=[];var e=new eui.Image;return e.touchEnabled=!1,e.source="selectrole_json.select_role_random_png",t.backimg=e,t.elementsContent=[e],t.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("backimg","x",3),new eui.SetProperty("backimg","y",3),new eui.SetProperty("backimg","scaleX",.92),new eui.SetProperty("backimg","scaleY",.92)]),new eui.State("disabled",[])],t},e.prototype.initMyView=function(){this.createMyView(),this.enterMyGameing=!1,this.countMyDown=0,this.btnMyMc=new LoadingMyMeanEffect;var t=[];t.push(RES.getRes("selectrole_json.selectrole_start_png")),t.push(RES.getRes("selectrole_json.selectrole_start_02_png")),t.push(RES.getRes("selectrole_json.selectrole_start_03_png")),t.push(RES.getRes("selectrole_json.selectrole_start_04_png")),t.push(RES.getRes("selectrole_json.selectrole_start_05_png")),t.push(RES.getRes("selectrole_json.selectrole_start_06_png")),this.btnMyMc.textureMyData(t),this.btnMyMc.playMy(),this.enterMyGameBtn.mcDisplay&&this.enterMyGameBtn.mcDisplay.addChild(this.btnMyMc),this.requestMy=new egret.HttpRequest,this.requestMy.responseType=egret.HttpResponseType.TEXT,this.requestMy.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._time=new egret.Timer(1e3)},e.prototype.initMyEvent=function(){this.manMyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__roleMyChangeHandler,this),this.womanMyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__roleMyChangeHandler,this),this.randomMyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__randomMyNameNickHandler,this),this.nickMyNameTxt.addEventListener(egret.FocusEvent.FOCUS_IN,this.__focusInMyTxtHandler,this),this.nickMyNameTxt.addEventListener(egret.FocusEvent.FOCUS_OUT,this.__focusOutMyTxtHandler,this),this.enterMyGameBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__enterGameMyHandler,this),this.requestMy.addEventListener(egret.Event.COMPLETE,this.__onCompleteMyHandler,this),this.requestMy.addEventListener(egret.IOErrorEvent.IO_ERROR,this.__onIOErrorMyHandler,this),this._time.addEventListener(egret.TimerEvent.TIMER,this.__countDownMyHandler,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.resize,this)},e.prototype.removeMyEvent=function(){this.manMyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__roleMyChangeHandler,this),this.womanMyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__roleMyChangeHandler,this),this.randomMyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__randomMyNameNickHandler,this),this.nickMyNameTxt.removeEventListener(egret.FocusEvent.FOCUS_IN,this.__focusInMyTxtHandler,this),this.nickMyNameTxt.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.__focusOutMyTxtHandler,this),this.enterMyGameBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__enterGameMyHandler,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.resize,this),this._time&&this._time.stop(),this._time.removeEventListener(egret.TimerEvent.TIMER,this.__countDownMyHandler,this)},e.prototype.initMyData=function(){this.manMyBtn.dispatchEventWith(egret.TouchEvent.TOUCH_TAP),this._time.start()},e.prototype.resize=function(){this.stage&&(this.scaleY=this.stage.stageHeight/LoadingConst.STAGE_HIEGHT,this.scaleX=this.scaleY)},e.prototype.reportMyFirstLogin=function(){if(!LoadingConst.IS_GUNFU&&!e.isReportFirstLogin){e.isReportFirstLogin=!0;var t={openid:hitalk.urlParam.openid};hitalkOpenSdk.firstLogin(t)}},e.prototype.__roleMyChangeHandler=function(t){this.selectMyIndex=t.currentTarget==this.manMyBtn?0:1,egret.Tween.removeTweens(this.roleMyImg_1),egret.Tween.removeTweens(this.roleMyImg_2),0==this.selectMyIndex?(LoadingConst.IS_MOBILE?this.roleMyImg_1.source=hitalkOpenSdk.getCreateRoleBgUrl(1):this.roleMyImg_1.source=hitalkOpenSdk.getCreateRolePCBgUrl(1),egret.Tween.get(this.roleMyImg_1).to({alpha:1},200),egret.Tween.get(this.roleMyImg_2).to({alpha:0},200),this.manMyBtn.texture=RES.getRes("selectrole_json.select_role_sel2_png"),this.womanMyBtn.texture=RES.getRes("selectrole_json.select_role_unsel1_png")):(LoadingConst.IS_MOBILE?this.roleMyImg_2.source=hitalkOpenSdk.getCreateRoleBgUrl(2):this.roleMyImg_2.source=hitalkOpenSdk.getCreateRolePCBgUrl(2),egret.Tween.get(this.roleMyImg_1).to({alpha:0},200),egret.Tween.get(this.roleMyImg_2).to({alpha:1},200),this.manMyBtn.texture=RES.getRes("selectrole_json.select_role_unsel2_png"),this.womanMyBtn.texture=RES.getRes("selectrole_json.select_role_sel1_png")),this.__randomMyNameNickHandler(null),this.updateMyMsg(LoadingErrorType.TYPE_1000)},e.prototype.__randomMyNameNickHandler=function(t){if(!this.enterMyGameing){if(e.isFirstClick&&this.reportMyFirstLogin(),e.isFirstClick=!0,!this.initMyName&&(this.initMyName=!0,LoadingManager.instance.name))return void(this.nickMyNameTxt.text=LoadingManager.instance.name);this.nickMyNameTxt.text=LoadingManager.instance.getNickNameBySex(this.selectMyIndex+1),this.updateMyMsg(LoadingErrorType.TYPE_1000)}},e.prototype.__focusInMyTxtHandler=function(t){this.reportMyFirstLogin(),this.countMyDown=this.MAX_TIME,this.updateMyMsg(LoadingErrorType.TYPE_1000)},e.prototype.__focusOutMyTxtHandler=function(t){this.resetMyCountDown()},e.prototype.__enterGameMyHandler=function(t){if(!this.enterMyGameing){this.reportMyFirstLogin();var e=this.nickMyNameTxt.text.trim();if(0==e.length)return this.updateMyMsg(LoadingErrorType.TYPE_1001),void this.resetMyCountDown();var i=/[^\u4e00-\u9fa50-9a-zA-Z_]/g;if(i.test(e))return this.updateMyMsg(LoadingErrorType.TYPE_1002),void this.resetMyCountDown();var n=LoadingConst.getStringLength(e);if(4>n)return this.updateMyMsg(LoadingErrorType.TYPE_1003),void this.resetMyCountDown();if(n>12)return this.updateMyMsg(LoadingErrorType.TYPE_1004),void this.resetMyCountDown();this.setMyEntering(!0);var r=this.selectMyIndex+1,s=assembleSelectRoleParams(e,r);this.requestMy.open(s,egret.HttpMethod.GET),this.requestMy.send()}},e.prototype.__onCompleteMyHandler=function(t){var e=JSON.parse(this.requestMy.response);if(console.log("起名结果返回:"+JSON.stringify(e)),e){var i=e.c||0;if(i!=LoadingErrorType.TYPE_1)this.updateMyMsg(i),this.resetMyCountDown(),this.setMyEntering(!1);else{LoadingManager.$inst.uid=parseInt(e.u),LoadingManager.$inst.loginKey=e.k,LoadingManager.$inst.ip=e.cip,LoadingManager.$inst.port=e.cpt,LoadingManager.$inst.isNew=!0,LoadingMyFrame.instance.setupMy(),LoadingManager.$inst.enterGame();this.nickMyNameTxt?this.nickMyNameTxt.text:"",LoadingManager.$inst.uid.toString(),LoadingManager.$inst.serverData.aid;this.dispose()}}},e.prototype.__countDownMyHandler=function(){this.enterMyGameing||this.countMyDown>=this.MAX_TIME||(this.countMyDown++,this.timeEndMyTxt.text=this.MAX_TIME-this.countMyDown+"秒后自动踏入仙途 ",this.countMyDown>=this.MAX_TIME&&this.__enterGameMyHandler(null))},e.prototype.resetMyCountDown=function(){this.countMyDown=0},e.prototype.__onIOErrorMyHandler=function(t){this.updateMyMsg(LoadingErrorType.TYPE_5),this.resetMyCountDown(),this.setMyEntering(!1)},e.prototype.updateMyMsg=function(t){void 0===t&&(t=1e3),this.msgMyTxt.text=LoadingManager.instance.getMsgPrompt(t)},e.prototype.setMyEntering=function(t){this.enterMyGameing=t,this.manMyBtn.touchEnabled=this.womanMyBtn.touchEnabled=!t},e.prototype.isHideMySexUI=function(){LoadingConst.IS_WX_AUDIT&&(this.womanMyBtn.visible=!1,this.manMyBtn.visible=!1)},e.prototype.show=function(){LoadingMyLayer.instance.addToMyLayer(this)},e.prototype.dispose=function(){this.destory||(LoadingMyFullView.instance.updateMyBigBg(LoadingConst.LOADING_BIG_BACK),this.removeMyEvent(),egret.Tween.removeTweens(this.roleMyImg_1),egret.Tween.removeTweens(this.roleMyImg_2),LoadingConst.IS_WXGAME?(RES.destroyRes("select_role_wxgame1_jpg"),RES.destroyRes("select_role_wxgame2_jpg")):(RES.destroyRes("select_role_1_jpg"),RES.destroyRes("select_role_2_jpg")),this.roleMyImg_1&&this.roleMyImg_1.texture&&this.roleMyImg_1.texture.dispose(),LoadingConst.disposeObject(this.roleMyImg_1),this.roleMyImg_1=null,this.roleMyImg_2&&this.roleMyImg_2.texture&&this.roleMyImg_2.texture.dispose(),LoadingConst.disposeObject(this.roleMyImg_2),this.roleMyImg_2=null,LoadingConst.disposeObject(this.btnMyMc),this.btnMyMc=null,LoadingConst.disposeObject(this.enterMyGameBtn),this.enterMyGameBtn=null,LoadingConst.disposeObject(this.nameMyBackImg),this.nameMyBackImg=null,LoadingConst.disposeObject(this.nameMyTxtImg),this.nameMyTxtImg=null,LoadingConst.disposeObject(this.nickMyNameTxt),this.nickMyNameTxt=null,LoadingConst.disposeObject(this.manMyBtn),this.manMyBtn=null,LoadingConst.disposeObject(this.womanMyBtn),this.womanMyBtn=null,LoadingConst.disposeObject(this.randomMyBtn),this.randomMyBtn=null,LoadingConst.disposeObject(this.msgMyTxt),this.msgMyTxt=null,LoadingConst.disposeObject(this.timeEndMyTxt),this.timeEndMyTxt=null,this.requestMy&&(this.requestMy.removeEventListener(egret.Event.COMPLETE,this.__onCompleteMyHandler,this),this.requestMy.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.__onIOErrorMyHandler,this)),this.requestMy=null,this._time=null,t.prototype.dispose.call(this))},e.isReportFirstLogin=!1,e.isFirstClick=!1,e}(LoadingMyBaseUI);__reflect(SelectMyRoleFrame.prototype,"SelectMyRoleFrame");var ChangeMyServerFrame=function(t){function e(e){var i=t.call(this,"ChangeServerFrame")||this;return i.historyMyServers=e||[],i}return __extends(e,t),e.prototype.createMyView=function(){this.width=499,this.height=719,this.verticalCenter=0,this.horizontalCenter=0,this.backMyImg=new eui.Image,this.backMyImg.source="change_server_back_png",this.backMyImg.touchEnabled=!1,this.addChild(this.backMyImg),this.descMyTxt=new eui.Label,this.descMyTxt.size=18,this.descMyTxt.textAlign="center",this.descMyTxt.touchEnabled=!1,this.descMyTxt.textColor=15460053,this.descMyTxt.strokeColor=70947,this.descMyTxt.stroke=1,this.descMyTxt.width=150,this.descMyTxt.height=18,this.descMyTxt.x=235,this.descMyTxt.y=110,this.addChild(this.descMyTxt),this.groupMyScroller=new eui.Scroller,this.groupMyScroller.anchorOffsetX=0,this.groupMyScroller.anchorOffsetY=0,this.groupMyScroller.width=142,this.groupMyScroller.height=533,this.groupMyScroller.x=35,this.groupMyScroller.y=70,this.groupMyScroller.viewport=this.serverMyGroupList=this.getGroupMyViewPort(4),this.addChild(this.groupMyScroller),this.listMyScroller=new eui.Scroller,this.listMyScroller.anchorOffsetX=0,this.listMyScroller.anchorOffsetY=0,this.listMyScroller.width=290,this.listMyScroller.height=533,this.listMyScroller.x=197,this.listMyScroller.y=70,this.listMyScroller.viewport=this.serverMyList=this.getGroupMyViewPort(2),this.addChild(this.listMyScroller),this.closeMyBtn=new eui.Button,this.closeMyBtn.skinName=this.getCloseMyBtnSkin(),this.closeMyBtn.x=450,this.closeMyBtn.y=45,this.addChild(this.closeMyBtn)},e.prototype.getCloseMyBtnSkin=function(){var t=new eui.Skin;t.skinParts=[];var e=new eui.Image;return e.touchEnabled=!1,e.source="selectserver_json.alert_close_png",t.img_1=e,t.elementsContent=[e],t.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("img_1","y",-2)]),new eui.State("disabled",[])],t},e.prototype.getGroupMyViewPort=function(t){var e=new eui.List;return e.anchorOffsetX=0,e.anchorOffsetY=0,e.percentHeight=100,e.useVirtualLayout=!0,e.percentWidth=100,e.layout=this._VerticalMyLayout1_i(t),e},e.prototype._VerticalMyLayout1_i=function(t){var e=new eui.VerticalLayout;return e.gap=t,e.horizontalAlign="left",e.verticalAlign="top",e},e.prototype.initMyView=function(){this.createMyView(),this.descMyTxt.text=LoadingConst.MSG_3,this.groupMyData=new eui.ArrayCollection,this.listMyData=new eui.ArrayCollection,this.serverMyGroupList.dataProvider=this.groupMyData,this.serverMyGroupList.itemRenderer=ChangeServerItem,this.serverMyList.dataProvider=this.listMyData,this.serverMyList.itemRenderer=ServerItemMyRenderer,this.groupMyData.source.push(LoadingConst.HISTORY_SERVER),this.groupMyData.refresh()},e.prototype.initMyData=function(){var t=getAllServerListUrl(LoadingManager.$inst.userData.threePlatformId);t=assembleURLParam(t),this.requestMy=new egret.HttpRequest,this.requestMy.responseType=egret.HttpResponseType.TEXT,this.requestMy.open(t,egret.HttpMethod.GET),this.requestMy.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.requestMy.addEventListener(egret.Event.COMPLETE,this.__onGetCompleteMyHandler,this),this.requestMy.addEventListener(egret.IOErrorEvent.IO_ERROR,this.__onGetIOErrorMyHandler,this),this.requestMy.send()},e.prototype.initMyEvent=function(){this.closeMyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__closeMyFrameHandler,this),this.serverMyGroupList.addEventListener(egret.Event.CHANGE,this.__serverGroupMyChangeHandler,this),this.serverMyList.addEventListener(egret.Event.CHANGE,this.__serverMyChangeHandler,this)},e.prototype.removeMyEvent=function(){this.closeMyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__closeMyFrameHandler,this),this.serverMyGroupList.removeEventListener(egret.Event.CHANGE,this.__serverGroupMyChangeHandler,this),this.serverMyList.removeEventListener(egret.Event.CHANGE,this.__serverMyChangeHandler,this)
},e.prototype.__onGetCompleteMyHandler=function(t){var e=JSON.parse(this.requestMy.response);if(e){e=hitalkOpenSdk.changeServerName(e),this.allServerMyList=e,this.allServerMyList&&this.allServerMyList.sort(this.serverSoft);for(var i=Math.ceil(this.allServerMyList.length/100),n=i;n>0;n--)this.groupMyData.source.push(100*n-99+"-"+100*n+LoadingConst.SERVER);this.groupMyData.refresh(),this.serverMyGroupList.selectedIndex=0}else this.__onGetIOErrorMyHandler(null)},e.prototype.serverSoft=function(t,e){var i=t.aid||0,n=e.aid||0;return n>i?-1:1},e.prototype.__onGetIOErrorMyHandler=function(t){LoadingMyAlert.show(LoadingConst.GET_ERROR,void 0,LoadingMyAlert.YES)},e.prototype.__serverGroupMyChangeHandler=function(t){this.listMyScroller&&this.listMyScroller.stopAnimation();var e=this.serverMyGroupList.selectedIndex;this.listMyData.source.splice(0,this.listMyData.length);var i=[];if(0==e)for(var n=0;n<this.historyMyServers.length;n++)-1==i.indexOf(this.historyMyServers[n].id)&&(i.push(this.historyMyServers[n].id),this.listMyData.source.push(this.historyMyServers[n]));else if(e>0){var r=Math.ceil(this.allServerMyList.length/100);e=r-(e-1);for(var s=100*(e-1),o=Math.min(100*e,this.allServerMyList.length),a=0,n=s;o>n;n++)-1==i.indexOf(this.allServerMyList[o-a-1].id)&&(i.push(this.allServerMyList[o-a-1].id),this.listMyData.source.push(this.allServerMyList[o-a-1])),a++}this.listMyData.refresh(),this.descMyTxt.visible=!(this.listMyData.length>0)},e.prototype.__serverMyChangeHandler=function(t){var e=this.serverMyList.selectedIndex;if(e>=0&&e<this.listMyData.length){var i=this.listMyData.source[e];this._callMyFun&&this._callMyFun.call(this._thisMyObj,i),this.__closeMyFrameHandler(null)}},e.prototype.show=function(t,e){this._callMyFun=t,this._thisMyObj=e,this.visible=!0,this.serverMyGroupList.selectedIndex=0,this.__serverGroupMyChangeHandler(null),!this.parent&&LoadingMyLayer.instance.addToMyLayer(this)},e.prototype.hide=function(){this.visible=!1},e.prototype.__closeMyFrameHandler=function(t){this.hide()},e.prototype.dispose=function(){this.removeMyEvent(),LoadingConst.disposeObject(this.closeMyBtn),this.closeMyBtn=null,this.groupMyScroller&&(this.groupMyScroller.stopAnimation(),this.groupMyScroller.viewport=null,LoadingConst.disposeObject(this.groupMyScroller)),this.groupMyScroller=null,this.serverMyGroupList&&(this.serverMyGroupList.dataProvider=null,LoadingConst.disposeObject(this.serverMyGroupList)),this.serverMyGroupList=null,this.listMyScroller&&(this.listMyScroller.stopAnimation(),this.listMyScroller.viewport=null,LoadingConst.disposeObject(this.listMyScroller)),this.listMyScroller=null,this.serverMyList&&(this.serverMyList.dataProvider=null,LoadingConst.disposeObject(this.serverMyList)),this.serverMyList=null,this.requestMy&&(this.requestMy.removeEventListener(egret.Event.COMPLETE,this.__onGetCompleteMyHandler,this),this.requestMy.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.__onGetIOErrorMyHandler,this)),this.requestMy=null,this.historyMyServers=null,this.groupMyData=null,this.listMyData=null,this._callMyFun=null,this._thisMyObj=null,t.prototype.dispose.call(this)},e}(LoadingMyBaseUI);__reflect(ChangeMyServerFrame.prototype,"ChangeMyServerFrame");var ChangeServerItem=function(t){function e(){var e=t.call(this)||this;return e.skinName=e.getSelfMySkins(),e}return __extends(e,t),e.prototype.getSelfMySkins=function(){var t=new eui.Skin;t.width=142,t.height=46,t.skinParts=["backImg","nameTxt"];var e=new eui.Image;e.touchEnabled=!1,e.source="selectserver_json.change_server_back3_png",e.x=e.y=0,t.backImg=e;var i=new eui.Label;return i.size=18,i.textColor=2763306,i.textAlign="center",i.touchEnabled=!1,i.width=121,i.height=18,i.x=12,i.y=14,t.nameTxt=i,t.elementsContent=[e,i],t.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("upAndSelected",[new eui.SetProperty("backImg","source","selectserver_json.change_server_back2_png")]),new eui.State("downAndSelected",[new eui.SetProperty("backImg","source","selectserver_json.change_server_back2_png")])],t},e.prototype.initMyEvent=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.__removedFromStageMyHandler,this)},e.prototype.removeEvent=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.__removedFromStageMyHandler,this)},e.prototype.initMyData=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.initFinish&&this.data&&(this.nameTxt.text=this.data)},e.prototype.__removedFromStageMyHandler=function(t){this.dispose()},e.prototype.dispose=function(){this.removeEvent(),this.nameTxt&&this.nameTxt.parent&&this.nameTxt.parent.removeChild(this.nameTxt),this.nameTxt=null,this.backImg&&this.backImg.parent&&this.backImg.parent.removeChild(this.backImg),this.backImg=null,t.prototype.dispose.call(this)},e}(LoadingBaseItemRenderer);__reflect(ChangeServerItem.prototype,"ChangeServerItem");var LoadingMyFrame=function(t){function e(){var i=t.call(this,"LoadingFrame")||this;return i.isChangeMyRes=!1,e._instance?i:(e._instance=i,i)}return __extends(e,t),e.prototype.createMyView=function(){this.verticalCenter=0,this.horizontalCenter=0,this.width=LoadingConst.STAGE_WIDTH,this.height=LoadingConst.STAGE_HIEGHT,this.touchEnabled=this.touchChildren=!1,this.prog_Myback=new egret.Bitmap,this.prog_Myback.x=60,this.prog_Myback.y=701,this.addChild(this.prog_Myback),this.prog_Myback2=new egret.Bitmap,this.prog_Myback2.x=60,this.prog_Myback2.y=743,this.addChild(this.prog_Myback2),this.msgMyTxt=new eui.Label,this.msgMyTxt.size=18,this.msgMyTxt.textColor=2763306,this.msgMyTxt.textAlign="center",this.msgMyTxt.width=300,this.msgMyTxt.height=16,this.msgMyTxt.horizontalCenter=0,this.msgMyTxt.y=777,this.addChild(this.msgMyTxt),this.totalProg_Myimg=new eui.Image,this.totalProg_Myimg.width=424,this.totalProg_Myimg.height=8,this.totalProg_Myimg.x=60,this.totalProg_Myimg.y=704,this.addChild(this.totalProg_Myimg),this.currProg_Myimg=new eui.Image,this.currProg_Myimg.width=424,this.currProg_Myimg.height=8,this.currProg_Myimg.x=60,this.currProg_Myimg.y=746,this.addChild(this.currProg_Myimg),this.totalProg_run_Myimg=new eui.Image,this.totalProg_run_Myimg.width=73,this.totalProg_run_Myimg.height=53,this.totalProg_run_Myimg.x=60,this.totalProg_run_Myimg.y=663,this.addChild(this.totalProg_run_Myimg),this.currProg_run_Myimg=new eui.Image,this.currProg_run_Myimg.width=73,this.currProg_run_Myimg.height=53,this.currProg_run_Myimg.x=60,this.currProg_run_Myimg.y=707,this.addChild(this.currProg_run_Myimg),this.totalProgMyTxt=new eui.Label,this.totalProgMyTxt.size=16,this.totalProgMyTxt.textColor=14209232,this.totalProgMyTxt.strokeColor=68116,this.totalProgMyTxt.textAlign="center",this.totalProgMyTxt.stroke=1,this.totalProgMyTxt.width=100,this.totalProgMyTxt.height=16,this.totalProgMyTxt.horizontalCenter=0,this.totalProgMyTxt.y=700,this.addChild(this.totalProgMyTxt)},e.prototype.initMyView=function(){this.createMyView(),this.progMaxMyWidth=424,this.msgMyTxt.text=LoadingConst.MSG_1;var t=LoginMyBackView.instance.getTextureMyByName(LoadingConst.PROG_BACK);this.prog_Myback.texture=t,this.prog_Myback2.texture=t,t=LoginMyBackView.instance.getTextureMyByName(LoadingConst.PROG_THUMB),this.totalProg_Myimg.texture=t,this.currProg_Myimg.texture=t,t=LoginMyBackView.instance.getTextureMyByName(LoadingConst.PROG_THUMB_RUN),this.totalProg_run_Myimg.texture=t,this.currProg_run_Myimg.texture=t},e.prototype.resize=function(){var t=-32,e=1;this.prog_Myback.y=(701+t)*e,this.prog_Myback2.y=(743+t)*e,this.msgMyTxt.y=(777+t)*e,this.totalProg_Myimg.y=(702+t)*e,this.currProg_Myimg.y=(744+t)*e,this.totalProg_run_Myimg.y=(663+t)*e,this.currProg_run_Myimg.y=(707+t)*e,this.totalProgMyTxt.y=(700+t)*e,this.stage&&(this.scaleY=this.stage.stageHeight/LoadingConst.STAGE_HIEGHT,this.scaleX=this.scaleY)},e.prototype.removeMyEvent=function(){LoadingManager.$stage.removeEventListener(egret.Event.ENTER_FRAME,this.__enterMyFrameHandler,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.__groupLoadMyComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.__groupMyLoadErr,this)},e.prototype.initMyData=function(){},Object.defineProperty(e,"instance",{get:function(){return this._instance||new e},enumerable:!0,configurable:!0}),e.prototype.setupMy=function(){this.loopMyFrame=0,this._currMyProg=0,this._totalMyProg=0,this.updateMyProgBar(this._currMyProg),LoadingManager.$stage.addEventListener(egret.Event.ENTER_FRAME,this.__enterMyFrameHandler,this),this.addChildAt(LoginMyBackView.instance,0),!this.parent&&LoadingMyLayer.instance.addToMyLayer(this),this.resize()},e.prototype.pause=function(){LoadingManager.$stage.removeEventListener(egret.Event.ENTER_FRAME,this.__enterMyFrameHandler,this),this.parent&&this.parent.removeChild(this)},e.prototype.showSkillMyCard=function(){LoadingManager.$inst.isNew&&(this.step=1)},e.prototype.load=function(t,e,i,n){t&&0!=t.length&&(this.items=t,this.callMyFun=e,this.thisMyObj=i,this.params=n,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.__groupLoadMyComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.__groupMyLoadErr,this),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.__configMyComplete,this),this.currMyIndex=-1,this.currMyData=null,this.intMyStep=this._totalMyProg,this.stepMyProg=parseFloat(((100-this._totalMyProg)/this.items.length).toFixed(1)),this.loadMyNext())},e.prototype.loadMyNext=function(){if(this.currMyIndex++,this.currMyIndex>=this.items.length)return void egret.Tween.get(this).wait(300).call(this.__loadMyOver,this);if(this._currMyProg=this._totalMyProg,this.totalMyProg=this.intMyStep+(this.currMyIndex+1)*this.stepMyProg,this.currMyData=this.items[this.currMyIndex],1==this.currMyData.type)console.log("1.加载组:"+this.currMyData.url),RES.loadGroup(this.currMyData.groupName);else if(2==this.currMyData.type)console.log("2.加载皮肤:"+this.currMyData.url);else if(3==this.currMyData.type){console.log("3.加载模板:"+this.currMyData.url);var t=egret.getDefinitionByName("LoaderManager");t&&t.instance.load(this.currMyData.url,this.__urlResourceMyLoadComplete,this),!t&&console.log("找不到 LoaderManager")}else if(4==this.currMyData.type){console.log("4.加载技能效果:"+this.currMyData.url);var e=egret.getDefinitionByName("EffectSheetCache");e&&e.instance.getEffectSheet(this.currMyData.url,this.__skillLoadComplete,this),!e&&console.log("找不到 EffectSheetCache")}else if(5==this.currMyData.type)console.log("5.加载代码:"+this.currMyData.url),this.startLoadMyCode();else if(8==this.currMyData.type)console.log("8.资源配置:"+this.currMyData.url),RES.loadConfig(this.currMyData.url,this.currMyData.root);else if(6==this.currMyData.type){console.log("6.加载主题皮肤:"+this.currMyData.url);var i=new eui.Theme(this.currMyData.url,LoadingManager.$stage);i.addEventListener(eui.UIEvent.COMPLETE,this.__onThemeMyLoadComplete,this)}},e.prototype.__skillLoadComplete=function(t){this.currMyData.url==t.key&&this.loadMyNext()},e.prototype.__onThemeMyLoadComplete=function(t){var e=t.currentTarget;e&&e.removeEventListener(eui.UIEvent.COMPLETE,this.__onThemeMyLoadComplete,this),this.loadMyNext()},e.prototype.__groupLoadMyComplete=function(t){t.groupName==this.currMyData.groupName&&this.loadMyNext()},e.prototype.__configMyComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.__configMyComplete,this),this.loadMyNext()},e.prototype.__skinLoadMyComplete=function(t,e){this.destory||this.currMyData.url==e&&this.loadMyNext()},e.prototype.__urlResourceMyLoadComplete=function(t){this.destory||(t&&t.data&&this.currMyData&&3==this.currMyData.type&&(LoadingManager.$inst.allTemplateData=t.data),this.loadMyNext())},e.prototype.__urlResourceMyLoadError=function(){this.destory||(this.isChangeMyRes=!0,this.currMyIndex--,this.loadMyNext())},e.prototype.__groupMyLoadErr=function(t){t.groupName==this.currMyData.groupName&&LoadingMyAlert.show("加载受阻，请尝试切换更好的网络环境!\nError Type:"+this.currMyData.groupName)},e.prototype.startLoadMyCode=function(){hitalkOpenSdk.loadSubpackage(this.__codeCompleteMyHandler.bind(this))},e.prototype.__codeCompleteMyHandler=function(t){if(!t)return void LoadingMyAlert.show("加载受阻，请尝试切换更好的网络环境!\nError Type:1005");var e=egret.getDefinitionByName("LoginManager");e&&e.instance.initMgr(LoadingManager.$stage,LoadingManager.$inst),this.loadMyNext()},e.prototype.__loadMyOver=function(){var t=this.callMyFun,e=this.thisMyObj,i=this.params;t&&t.apply(e,i)},e.prototype.__enterMyFrameHandler=function(){this.initFinish&&!this.destory&&(this.loopMyFrame++,this.updateMyTotalProg(),this.updateMyFalseProg(),this.updateMyCardImg())},e.prototype.updateMyTotalProg=function(){this.loopMyFrame%2==0&&this._currMyProg<this._totalMyProg&&(this._currMyProg++,this.updateMyProgBar(this._currMyProg))},e.prototype.updateMyProgBar=function(t){this.totalProgMyTxt&&(this.totalProgMyTxt.text=t+"%"),t=Math.floor(this.progMaxMyWidth*t*.01);var e=this.totalProg_Myimg.$scrollRect||new egret.Rectangle(0,0,0,0);e.setTo(0,0,t,this.totalProg_Myimg.height),this.totalProg_Myimg.scrollRect=e,this.totalProg_run_Myimg.x=e.width-12},e.prototype.updateMyFalseProg=function(){this.loopMyFrame>=110&&(this.loopMyFrame=0);var t=Math.min(this.progMaxMyWidth,this.progMaxMyWidth*this.loopMyFrame*.01),e=this.currProg_Myimg.$scrollRect||new egret.Rectangle(0,0,0,0);e.setTo(0,0,Math.floor(t),this.currProg_Myimg.height),this.currProg_Myimg.scrollRect=e,this.currProg_run_Myimg.x=e.width-12},e.prototype.updateMyCardImg=function(){},Object.defineProperty(e.prototype,"currMyProg",{get:function(){return this._currMyProg},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalMyProg",{set:function(t){0>t&&(t=0),t>100&&(t=100),this._totalMyProg=Math.floor(t)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.removeMyEvent(),RES.destroyRes(LoadingConst.LOADING_GROUP),egret.Tween.removeTweens(this),this.getMyImg&&egret.Tween.removeTweens(this.getMyImg),this.items=null,this.callMyFun=null,this.thisMyObj=null,this.params=null,LoadingConst.disposeObject(this.cardMyImg),this.cardMyImg=null,LoadingConst.disposeObject(this.getMyImg),this.getMyImg=null,t.prototype.dispose.call(this)},e}(LoadingMyBaseUI);__reflect(LoadingMyFrame.prototype,"LoadingMyFrame");var LoginMyBackView=function(t){function e(){var i=t.call(this,"LoginBackView")||this;return i._scale=1,e._instance?i:(e._instance=i,i)}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||new e},enumerable:!0,configurable:!0}),e.prototype.initMyView=function(){this.width=LoadingConst.STAGE_WIDTH,this.height=LoadingConst.STAGE_HIEGHT,this.touchEnabled=this.touchChildren=!1,this.verticalCenter=this.horizontalCenter=0},e.prototype.initChannelMyTxt=function(){this.channelMyTxt||(this.channelMyTxt=new eui.Label,this.channelMyTxt.x=0,this.channelMyTxt.y=800,this.channelMyTxt.horizontalCenter=0,this.channelMyTxt.textAlign="center",this.channelMyTxt.textColor=hitalkOpenSdk.getChannelColor(),this.channelMyTxt.size=14,this.channelMyTxt.lineSpacing=4,this.addChild(this.channelMyTxt),this.updateChannelMyTxt())},e.prototype.updateChannelMyTxt=function(t){this.channelMyTxt.text=t||hitalkOpenSdk.getChannelTxt()},e.prototype.showBackByMyName=function(t){this.backMyImg||(this.backMyImg=new eui.Image,this.backMyImg.touchEnabled=!1,this.backMyImg.horizontalCenter=0,this.addChild(this.backMyImg),this.initChannelMyTxt());var e=this.getTextureMyByName(t);this.backMyImg.bottom=0,this.backMyImg.texture=e},e.prototype.showBackBannerByMyName=function(t){this.backBannerMyImg||(this.backBannerMyImg=new eui.Image,this.backBannerMyImg.touchEnabled=!1,this.backBannerMyImg.horizontalCenter=3,this.addChild(this.backBannerMyImg));var e=this.getTextureMyByName(t);this.backBannerMyImg.top=440,this.backBannerMyImg.texture=e},Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale||1},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){this.completeMyFun=t,this.thisobjMy=e,this._textureMyDic={},this._urlMyList=[],LoadingConst.IS_MOBILE?this._urlMyList.push({type:LoadingConst.LOADING_BG,url:LoadingConst.res_url+hitalkOpenSdk.getLoadingBackUrl()}):this._urlMyList.push({type:LoadingConst.LOADING_BG,url:LoadingConst.res_url+hitalkOpenSdk.getPCBigLoadingBackUrl()}),this._urlMyList.push({type:LoadingConst.PROG_BACK,url:LoadingConst.res_url+LoadingConst.PROG_BACK_URL}),this._urlMyList.push({type:LoadingConst.PROG_THUMB,url:LoadingConst.res_url+LoadingConst.PROG_THUMB_URL}),this._urlMyList.push({type:LoadingConst.PROG_THUMB_RUN,url:LoadingConst.res_url+LoadingConst.PROG_THUMB_RUN_URL}),LoadingConst.IS_QQGAME&&this._urlMyList.push({type:LoadingConst.LOADING_QQGAME_GUIDE,url:LoadingConst.res_url+LoadingConst.LOADING_QQGAME_GUIDE_URL}),this._imageMyLoader=new egret.ImageLoader,this._imageMyLoader.addEventListener(egret.Event.COMPLETE,this.__onLoadMyFinishHandler,this),this._imageMyLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.__onLoadMyFinishHandler,this),this._index=0,this.loadMyNext()},e.prototype.loadMyNext=function(){if(this._index>=this._urlMyList.length)return void(this.completeMyFun&&this.completeMyFun.call(this.thisobjMy));1==this._index&&(hitalkOpenSdk.hideWxLoading(),this.showBackByMyName(LoadingConst.LOADING_BG));var t=this._urlMyList[this._index];this._imageMyLoader&&this._imageMyLoader.load(t.url+"?v="+LoadingConst.LOCAL_ROUTE)},e.prototype.__onLoadMyFinishHandler=function(t){if(!this.destory){if(t.$type==egret.Event.COMPLETE){var e=new egret.Texture;e._setBitmapData(this._imageMyLoader.data);var i=this._urlMyList[this._index];this._textureMyDic[i.type]=e}this._index++,this.loadMyNext()}},e.prototype.loadMySingleImage=function(t,e,i,n){if(this.getTextureMyByName(t))return void(i&&i.call(n));this.completeMyFun=i,this.thisobjMy=n,this._urlMyList.push({type:t,url:LoadingConst.res_url+e});var r=this._urlMyList[this._index];this._imageMyLoader&&this._imageMyLoader.load(r.url+"?v="+LoadingConst.LOCAL_ROUTE)},e.prototype.getTextureMyByName=function(t){return this._textureMyDic?this._textureMyDic[t]:null},e.prototype.updateMyBanner=function(t){},e.prototype.__loadCompleteMyHandler=function(){e.instance.showBackBannerByMyName(LoadingConst.LOADING_BANNER)},e.prototype.dispose=function(){if(e._instance=null,this._imageMyLoader&&(this._imageMyLoader.removeEventListener(egret.Event.COMPLETE,this.__onLoadMyFinishHandler,this),this._imageMyLoader.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.__onLoadMyFinishHandler,this)),this._imageMyLoader=null,LoadingConst.disposeObject(this.backMyImg),this.backMyImg=null,LoadingConst.disposeObject(this.channelMyTxt),this.channelMyTxt=null,this._textureMyDic){var i=void 0;for(var n in this._textureMyDic)i=this._textureMyDic[n],i&&i.dispose(),delete this._textureMyDic[n];i=null}this._textureMyDic=null,this._urlMyList&&(this._urlMyList.length=0),this._urlMyList=null,this.completeMyFun=null,this.thisobjMy=null,t.prototype.dispose.call(this)},e}(LoadingMyBaseUI);__reflect(LoginMyBackView.prototype,"LoginMyBackView");var LoadingMyNoticeFrame=function(t){function e(){return t.call(this,"LoadingNoticeFrame")||this}return __extends(e,t),e.prototype.initMyView=function(){this.width=490,this.height=500,this.verticalCenter=-150,this.horizontalCenter=0,this.bgMy=new eui.Image,this.bgMy.touchEnabled=!1,this.bgMy.x=17,this.bgMy.y=54,this.bgMy.scale9Grid=new egret.Rectangle(55,316,331,27),this.bgMy.height=448,this.addChild(this.bgMy),this.titleMy=new eui.Image,this.titleMy.y=58,this.titleMy.horizontalCenter=0,this.titleMy.touchEnabled=!1,this.addChild(this.titleMy),this.describeMyTxt=new eui.Label,this.describeMyTxt.textColor=3291214,this.describeMyTxt.size=16,this.describeMyTxt.width=320,this.describeMyTxt.wordWrap=!0,this.describeMyTxt.lineSpacing=5,this.describeMyTxt.touchEnabled=!1,this.describeMyTxt.text="",this.addChild(this.describeMyTxt),this.txtMyGroup=new eui.Group,this.txtMyGroup.addChild(this.describeMyTxt),this.txtMyScroller=new eui.Scroller,this.txtMyScroller.anchorOffsetX=0,this.txtMyScroller.anchorOffsetY=0,this.txtMyScroller.width=320,this.txtMyScroller.height=360,this.txtMyScroller.x=80,this.txtMyScroller.y=120,this.txtMyScroller.viewport=this.txtMyGroup,this.addChild(this.txtMyScroller),this.closeMyBtn=new eui.Button,this.closeMyBtn.skinName=this.getMyCloseBtnSkin(),this.closeMyBtn.x=390,this.closeMyBtn.y=65,this.addChild(this.closeMyBtn);var t=LoadingManager.$inst.loginData;this.serverMyData=t.s[0],this.serverMyData&&0===LoadingConst.NOTICE_TYPE?this.loadMyNoticeInfoRequest():1===LoadingConst.NOTICE_TYPE&&this.loadMyAgreementInfo()},e.prototype.loadMyAgreementInfo=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.__loadMyUserAgreement,this),RES.loadGroup(LoadingConst.USERAGREE_GROUP)},e.prototype.__loadMyUserAgreement=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.__loadMyUserAgreement,this),this.describeMyTxt.text=RES.getRes("agreement_json").useragree,this.updaetMyView()},e.prototype.loadMyNoticeInfoRequest=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.__loadMyNotice,this),RES.loadGroup(LoadingConst.NOTICE_GROUP);var t=getNoticeInfoUrl(this.serverMyData.ip,1,null);t=assembleURLParam(t),LoadMyRequest.sendMy(t,this.__onGetMyNoticeCompleteHander,this)},e.prototype.__loadMyNotice=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.__loadMyNotice,this),this.updaetMyView()},e.prototype.updaetMyView=function(){this.bgMy.texture=RES.getRes("notice_json.notice_bg_png"),this.titleMy.texture=RES.getRes("notice_json.notice_title_"+LoadingConst.NOTICE_TYPE+"_png")},e.prototype.__onGetMyNoticeCompleteHander=function(t){try{var e=JSON.parse(t),i=e.status>0?!0:!1,n=e.desc;i&&n?(this.describeMyTxt.textFlow=(new egret.HtmlTextParser).parser(e.desc),this.describeMyTxt.size=16,this.describeMyTxt.textAlign="left",this.txtMyScroller.x=80):(this.describeMyTxt.horizontalCenter=0,this.describeMyTxt.verticalCenter=0,this.describeMyTxt.size=22,this.describeMyTxt.textAlign="center",this.txtMyScroller.x=62,this.describeMyTxt.text=LoadingConst.NOTICE_ISNULL)}catch(r){this.describeMyTxt.text=LoadingConst.NOTICE_ISNULL,console.info("请求公告信息异常:",r)}},e.prototype.initMyData=function(){},e.prototype.initMyEvent=function(){this.closeMyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__closeMyFrameHandler,this)},e.prototype.removeMyEvent=function(){this.closeMyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__closeMyFrameHandler,this)},e.prototype.__closeMyFrameHandler=function(t){this.hide()},e.prototype.getMyCloseBtnSkin=function(){var t=new eui.Skin;t.skinParts=[];var e=new eui.Image;return e.touchEnabled=!1,e.source="selectserver_json.alert_close_png",t.img_1=e,t.elementsContent=[e],t.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("img_1","y",-2)]),new eui.State("disabled",[])],t},e.prototype.hide=function(){this.parent&&this.parent.removeChild(this)},e.prototype.show=function(){!this.parent&&LoadingMyLayer.instance.addToMyLayer(this,1)},e.prototype.dispose=function(){this.removeMyEvent(),1===LoadingConst.NOTICE_TYPE?RES.destroyRes(LoadingConst.USERAGREE_GROUP):RES.destroyRes(LoadingConst.NOTICE_GROUP),LoadingConst.disposeObject(this.bgMy),this.bgMy=null,LoadingConst.disposeObject(this.closeMyBtn),this.closeMyBtn=null,LoadingConst.disposeObject(this.describeMyTxt),this.describeMyTxt=null,this.txtMyScroller&&(this.txtMyScroller.stopAnimation(),this.txtMyScroller.viewport=null,LoadingConst.disposeObject(this.txtMyScroller)),this.txtMyGroup&&(LoadingConst.disposeObject(this.txtMyGroup),this.txtMyGroup=null),this.serverMyData=null,t.prototype.dispose.call(this)},e}(LoadingMyBaseUI);__reflect(LoadingMyNoticeFrame.prototype,"LoadingMyNoticeFrame");var SelectMyServerFrame=function(t){function e(){return t.call(this,"SelectServerFrame")||this}return __extends(e,t),e.prototype.createMyView=function(){this.width=LoadingConst.STAGE_WIDTH,this.height=LoadingConst.STAGE_HIEGHT,this.verticalCenter=0,this.horizontalCenter=0,this.startMyGameBtn=new eui.Button,this.startMyGameBtn.skinName=this.getStartMyGameBtnSkin(),this.startMyGameBtn.width=219,this.startMyGameBtn.height=73,this.startMyGameBtn.horizontalCenter=-10,this.startMyGameBtn.y=740,this.addChild(this.startMyGameBtn),this.changeMyServerImg=new egret.Bitmap,this.changeMyServerImg.touchEnabled=!0,this.changeMyServerImg.texture=RES.getRes("selectserver_json.selectserver_back2_png"),this.changeMyServerImg.x=69,this.changeMyServerImg.y=636,this.addChild(this.changeMyServerImg),this.clickMyChangeLabel=new eui.Label,this.clickMyChangeLabel.touchEnabled=!1,this.clickMyChangeLabel.size=18,this.clickMyChangeLabel.textColor=15858941,this.clickMyChangeLabel.x=350,this.clickMyChangeLabel.y=655,this.clickMyChangeLabel.text=LoadingConst.MSG_5,this.addChild(this.clickMyChangeLabel),this.hotMyImg=new egret.Bitmap,this.hotMyImg.touchEnabled=!1,this.hotMyImg.x=130,this.hotMyImg.y=656,this.addChild(this.hotMyImg),this.serverIdMyTxt=new eui.Label,this.serverIdMyTxt.size=18,this.serverIdMyTxt.touchEnabled=!1,this.serverIdMyTxt.textColor=15858941,this.serverIdMyTxt.width=220,this.serverIdMyTxt.height=18,this.serverIdMyTxt.x=210,this.serverIdMyTxt.y=657,this.addChild(this.serverIdMyTxt),this.versionMyTxt=new eui.Label,this.versionMyTxt.size=16,this.versionMyTxt.touchEnabled=!1,this.versionMyTxt.strokeColor=68372,this.versionMyTxt.stroke=1,this.versionMyTxt.width=480,this.versionMyTxt.height=50,this.versionMyTxt.x=4,this.versionMyTxt.y=4,LoadingConst.IS_WXGAME&&(this.clearMyBtn=new eui.Button,this.clearMyBtn.skinName=this.getclearMyBtnSkin(),this.clearMyBtn.width=50,this.clearMyBtn.height=50,this.clearMyBtn.x=90,this.clearMyBtn.y=690,this.addChild(this.clearMyBtn)),LoadingConst.IS_QQGAME&&(this.qqguide=new eui.Image,this.qqguide.texture=LoginMyBackView.instance.getTextureMyByName(LoadingConst.LOADING_QQGAME_GUIDE),this.qqguide.x=180,this.qqguide.y=40,this.addChild(this.qqguide)),this.noticeMyBtn=new eui.Button,this.noticeMyBtn.skinName=this.getNoticeMyBtnSkin(),this.noticeMyBtn.width=48,this.noticeMyBtn.height=68,this.noticeMyBtn.x=50,this.noticeMyBtn.y=100,this.addChild(this.noticeMyBtn),this.initUserMyAgreement()},e.prototype.resize=function(){var t=9,e=1;this.startMyGameBtn.y=(710+t)*e,this.changeMyServerImg.y=(645+t)*e,this.clickMyChangeLabel.y=(655+t)*e,this.hotMyImg.y=(652+t)*e,this.serverIdMyTxt.y=(655+t)*e,this.versionMyTxt.y=4,this.stage&&(this.scaleY=this.stage.stageHeight/LoadingConst.STAGE_HIEGHT,this.scaleX=this.scaleY)},e.prototype.getNoticeMyBtnSkin=function(){var t=new eui.Skin;t.skinParts=["mcDisplay"];var e=new egret.Bitmap;return e.touchEnabled=!1,e.texture=RES.getRes("selectserver_json.notice_btn_png"),t.img_1=e,t.elementsContent=[e],t.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("img_1","x",2),new eui.SetProperty("img_1","y",2),new eui.SetProperty("img_1","scaleX",.92),new eui.SetProperty("img_1","scaleY",.92)]),new eui.State("disabled",[])],t},e.prototype.getStartMyGameBtnSkin=function(){var t=new eui.Skin;t.skinParts=["mcDisplay"];var e=new eui.Group;e.touchChildren=!1,e.touchEnabled=!1;var i=new egret.Bitmap;return i.touchEnabled=!1,i.texture=RES.getRes("selectserver_json.selectserver_start_png"),t.mcDisplay=e,t.back=i,t.mcDisplay.x=-30,t.mcDisplay.y=-2,t.elementsContent=[i,e],t.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("mcDisplay","x",-18),new eui.SetProperty("mcDisplay","y",2),new eui.SetProperty("mcDisplay","scaleX",.92),new eui.SetProperty("mcDisplay","scaleY",.92),new eui.SetProperty("back","x",12),new eui.SetProperty("back","y",4),new eui.SetProperty("back","scaleX",.92),new eui.SetProperty("back","scaleY",.92)]),new eui.State("disabled",[])],t},e.prototype.getclearMyBtnSkin=function(){var t=new eui.Skin;t.skinParts=["mcDisplay"];var e=new egret.Bitmap;return e.touchEnabled=!1,e.texture=RES.getRes("selectserver_json.clear_cache_png"),t.img_1=e,t.elementsContent=[e],t.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("img_1","x",2),new eui.SetProperty("img_1","y",2),new eui.SetProperty("img_1","scaleX",.92),new eui.SetProperty("img_1","scaleY",.92)]),new eui.State("disabled",[])],t},e.prototype.initMyView=function(){this.createMyView(),this.enterMyGameing=!1,this.versionMyTxt.text=LoadingConst.VERSION+LoadingConst.VER+"."+LoadingConst.LOCAL_ROUTE,this.wxMyConfig=window.__wxConfig||{},this.wxMyConfig&&this.wxMyConfig.debug&&(this.versionMyTxt.text+=" debug:true; envVer:"+(this.wxMyConfig.envVersion||"null"),console.log(this.wxMyConfig)),LoadingConst.DEBUG=LoadingConst.DEBUG||this.wxMyConfig.debug||!1,this.serverIdMyTxt.text=LoadingConst.SELECT_SERVER_TIP,this.addChildAt(LoginMyBackView.instance,0)},e.prototype.initMyEvent=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.__addMyToStage,this),this.startMyGameBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__startMyGameHandler,this),this.changeMyServerImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__changeMyServerHandkler,this),this.clearMyBtn&&this.clearMyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__clearMyCacheHandler,this),this.noticeMyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__noticeMyBtnClickHandler,this)},e.prototype.removeMyEvent=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.__addMyToStage,this),this.startMyGameBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__startMyGameHandler,this),this.changeMyServerImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__changeMyServerHandkler,this),this.clearMyBtn&&this.clearMyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__clearMyCacheHandler,this),this.noticeMyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__noticeMyBtnClickHandler,this)},e.prototype.initMyData=function(){this.responseMyData=LoadingManager.$inst.loginData,this.responseMyData&&(this.serverMyData=this.responseMyData.s[0]),this.updateMyServer(),console.log(window)},e.prototype.updateMyServer=function(){this.serverMyData&&(this.serverIdMyTxt.text=this.serverMyData.an,2==this.serverMyData.s?this.hotMyImg.texture=RES.getRes("selectserver_json.close_server_png"):this.serverMyData.aid>LoadingManager.$inst.SERVER_MAX_ID-5?this.hotMyImg.texture=RES.getRes("selectserver_json.new_server_png"):this.hotMyImg.texture=RES.getRes("selectserver_json.hot_server_png"),this.updateMyBanner())},e.prototype.__addMyToStage=function(){this.stage.addChild(this.versionMyTxt)},e.prototype.show=function(){LoadingMyLayer.instance.addToMyLayer(this),this.resize()},e.prototype.__noticeMyBtnClickHandler=function(t){LoadingConst.NOTICE_TYPE=0,this.noticeMyFrame||(this.noticeMyFrame=new LoadingMyNoticeFrame),this.noticeMyFrame.show()},e.prototype.__startMyGameHandler=function(t){if(this.isOpenMyUserAgreement()&&!this.selectMyBtn.selected)return void LoadingMyAlert.show("请先勾选用户协议!");if(!this.serverMyData)return void LoadingMyAlert.show("请选择区服!");if(2==this.serverMyData.s&&!LoadingConst.DEBUG)return void LoadingMyAlert.show(LoadingManager.$inst.getMsgPrompt(LoadingErrorType.TYPE_8));if(!LoadingManager.$inst.userData.threePlatformId)return void LoadingMyAlert.show("openId为空!");if(!this.enterMyGameing){try{var e=RES.getRes("click_mp3");e&&e.play(0,1)}catch(t){console.error(t)}if(!this.checkMyNewServer())return void LoadingMyAlert.show("服务器人数已满");this.enterMyGameing=!0,LoadingManager.$inst.serverData=this.serverMyData,LoadingConst.SERVER_NAME=this.serverMyData.an;var i=LoadingManager.$inst.userData.threePlatformId,n=this.serverMyData.id,r=hitalk.urlParam.snKey,s=hitalk.urlParam.zoneKey,o=getUIDUrl(n,i);o=assembleURLParam(o),r&&(o+="&snKey="+r),s&&(o+="&zoneKey="+s),this.requestMy=new egret.HttpRequest,this.requestMy.responseType=egret.HttpResponseType.TEXT,this.requestMy.open(o,egret.HttpMethod.GET),this.requestMy.addEventListener(egret.Event.COMPLETE,this.__getUidMyCompleteHandler,this),this.requestMy.addEventListener(egret.IOErrorEvent.IO_ERROR,this.__getUidMyErrorHandler,this),this.requestMy.send()}},e.prototype.checkMyNewServer=function(){if("h0005"==hitalk.urlParam.snKey){for(var t=LoadingManager.$inst.loginData.s,e=t.length,i=0;e>i;i++)if(t[i].id==this.serverMyData.id)return!0;
return!1}return!0},e.prototype.__getUidMyCompleteHandler=function(t){this.requestMy.removeEventListener(egret.Event.COMPLETE,this.__getUidMyCompleteHandler,this),this.requestMy.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.__getUidMyErrorHandler,this);var e=JSON.parse(this.requestMy.response);if(e){var i=e.c||0;if(i==LoadingErrorType.TYPE_1){LoadingManager.$inst.uid=parseInt(e.u),LoadingManager.$inst.newbie=e.newbie,LoadingManager.$inst.loginKey=e.k,LoadingManager.$inst.ip=e.cip,LoadingManager.$inst.port=e.cpt,LoadingMyFrame.instance.setupMy(),LoadingManager.$inst.enterGame();LoadingManager.$inst.uid.toString(),LoadingManager.$inst.serverData.aid}else{if(i!=LoadingErrorType.TYPE_7)return LoadingMyAlert.show(LoadingManager.$inst.getMsgPrompt(i),void 0,LoadingMyAlert.YES),void(this.enterMyGameing=!1);LoadingMyFrame.instance.setupMy(),LoadingManager.$inst.enterSelectRole()}this.dispose()}},e.prototype.__getUidMyErrorHandler=function(t){this.destory||(this.requestMy.removeEventListener(egret.Event.COMPLETE,this.__getUidMyCompleteHandler,this),this.requestMy.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.__getUidMyErrorHandler,this),LoadingMyAlert.show("请尝试切换更好的网络环境!\nError Type:1014",void 0,LoadingMyAlert.YES),this.enterMyGameing=!1)},e.prototype.__changeMyServerHandkler=function(t){this.responseMyData&&!this.enterMyGameing&&(this.changeMyFrame||(this.changeMyFrame=new ChangeMyServerFrame(this.responseMyData.s)),this.changeMyFrame.show(this.__serverMyChangeHandler,this))},e.prototype.__clearMyCacheHandler=function(t){LoadingMyAlert.show("是否要清理本地缓存？",void 0,void 0,this.__confirmMyClearHandler,this)},e.prototype.__confirmMyClearHandler=function(){"function"==typeof hitalkOpenSdk.clearCache&&hitalkOpenSdk.clearCache()},e.prototype.__serverMyChangeHandler=function(t){t&&(this.serverMyData=t,this.updateMyServer())},e.prototype.updateMyBanner=function(){var t=this.serverMyData.charge;isNaN(t)||0>=t?LoginMyBackView.instance.updateMyBanner(0):LoginMyBackView.instance.updateMyBanner(1)},e.prototype.initUserMyAgreement=function(){this.isOpenMyUserAgreement()&&this.__loadMyUserAgreement()},e.prototype.disposeMyUserAgreement=function(){this.isOpenMyUserAgreement()&&(this.selectMyBtn.removeEventListener(egret.Event.CHANGE,this.__changeMySelectBtnHander,this),this.useragreementMyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__clickMyUserBtnHander,this),LoadingConst.disposeObject(this.selectMyBtn),this.selectMyBtn=null,LoadingConst.disposeObject(this.useragreementMyBtn),this.useragreementMyBtn=null)},e.prototype.getMyUseragreementBtnSkin=function(){var t=new eui.Skin;t.skinParts=["mcDisplay"];var e=new egret.Bitmap;e.touchEnabled=!1,e.texture=RES.getRes("selectserver_json.core_line_1_png"),e.x=138,e.y=20,e.width=74;var i=new eui.Label;return i.text="我已阅读并同意	用户协议",i.textColor=61695,i.size=20,i.stroke=1,i.strokeColor=0,t.line=e,t.txt=i,t.elementsContent=[e,i],t},e.prototype.getMySelectBtnSkin=function(){var t=new eui.Skin;t.skinParts=["mcDisplay"];var e=new egret.Bitmap;return e.touchEnabled=!1,e.texture=RES.getRes("selectserver_json.check_btn_2_png"),t.img=e,t.elementsContent=[e],t},e.prototype.__loadMyUserAgreement=function(){this.useragreementMyBtn=new eui.Button,this.useragreementMyBtn.skinName=this.getMyUseragreementBtnSkin(),this.useragreementMyBtn.x=165,this.useragreementMyBtn.y=797,this.addChild(this.useragreementMyBtn),this.useragreementMyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__clickMyUserBtnHander,this),this.selectMyBtn=new eui.CheckBox,this.selectMyBtn.skinName=this.getMySelectBtnSkin(),this.selectMyBtn.x=140,this.selectMyBtn.y=790,this.selectMyBtn.selected=!0,this.addChild(this.selectMyBtn),this.selectMyBtn.addEventListener(egret.Event.CHANGE,this.__changeMySelectBtnHander,this)},e.prototype.__changeMySelectBtnHander=function(t){var e=t.target,i=e.getChildAt(0);e.selected?(i.texture=RES.getRes("selectserver_json.check_btn_2_png"),i.x=0,i.y=0):(i.texture=RES.getRes("selectserver_json.check_btn_1_png"),i.x=0,i.y=2)},e.prototype.__clickMyUserBtnHander=function(t){LoadingConst.NOTICE_TYPE=1,this.userMyFrame||(this.userMyFrame=new LoadingMyNoticeFrame),this.userMyFrame.show()},e.prototype.isOpenMyUserAgreement=function(){return this.isWXminiChannel()},e.prototype.isWXminiChannel=function(){return window.hitalkOpenSDK?"h0011"===window.hitalkOpenSDK.snKey:void 0},e.prototype.dispose=function(){this.destory||(this.removeMyEvent(),LoadingConst.disposeObject(this.btnMyMc),this.btnMyMc=null,LoadingConst.disposeObject(this.startMyGameBtn),this.startMyGameBtn=null,LoadingConst.disposeObject(this.hotMyImg),this.hotMyImg=null,LoadingConst.disposeObject(this.clickMyChangeLabel),this.clickMyChangeLabel=null,LoadingConst.disposeObject(this.versionMyTxt),this.versionMyTxt=null,LoadingConst.disposeObject(this.changeMyServerImg),this.changeMyServerImg=null,LoadingConst.disposeObject(this.clearMyBtn),this.clearMyBtn=null,LoadingConst.disposeObject(this.qqguide),this.qqguide=null,this.serverIdMyTxt&&(this.serverIdMyTxt.visible=!1,LoadingConst.disposeObject(this.serverIdMyTxt),this.serverIdMyTxt=null),LoadingConst.disposeObject(this.changeMyFrame),this.changeMyFrame=null,LoadingConst.disposeObject(this.noticeMyFrame),this.noticeMyFrame=null,LoadingConst.disposeObject(this.userMyFrame),this.userMyFrame=null,this.requestMy&&(this.requestMy.removeEventListener(egret.Event.COMPLETE,this.__getUidMyCompleteHandler,this),this.requestMy.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.__getUidMyErrorHandler,this)),this.requestMy=null,this.responseMyData=null,this.serverMyData=null,this.wxMyConfig=null,LoadingConst.disposeObject(this.noticeMyBtn),this.noticeMyBtn=null,this.disposeMyUserAgreement(),t.prototype.dispose.call(this))},e}(LoadingMyBaseUI);__reflect(SelectMyServerFrame.prototype,"SelectMyServerFrame");var ServerItemMyRenderer=function(t){function e(){var e=t.call(this)||this;return e.skinName=e.getSelfMySkins(),e}return __extends(e,t),e.prototype.getSelfMySkins=function(){var t=new eui.Skin;t.width=262,t.height=47,t.skinParts=["backImg","stateImg","serverNameTxt"];var e=new eui.Image;e.touchEnabled=!1,e.source="selectserver_json.change_server_back4_png",e.x=e.y=0,t.backImg=e;var i=new eui.Image;i.touchEnabled=!1,i.source="selectserver_json.hot_server_png",i.x=20,i.y=12,t.stateImg=i;var n=new eui.Label;return n.size=18,n.textColor=2763306,n.textAlign="center",n.touchEnabled=!1,n.width=200,n.height=18,n.x=40,n.y=17,t.serverNameTxt=n,t.elementsContent=[e,i,n],t},e.prototype.initMyEvent=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.__removeFromStageMyHandler,this)},e.prototype.removeMyEvent=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.__removeFromStageMyHandler,this)},e.prototype.initMyData=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.initFinish&&this.data&&(this.serverInfo=this.data,this.serverNameTxt.text=this.serverInfo.an,2==this.serverInfo.s?this.stateImg.source="selectserver_json.close_server_png":this.serverInfo.aid>LoadingManager.instance.SERVER_MAX_ID-5?this.stateImg.source="selectserver_json.new_server_png":this.stateImg.source="selectserver_json.hot_server_png")},e.prototype.__removeFromStageMyHandler=function(t){this.dispose()},e.prototype.dispose=function(){this.removeMyEvent(),LoadingConst.disposeObject(this.backImg),this.backImg=null,LoadingConst.disposeObject(this.stateImg),this.stateImg=null,LoadingConst.disposeObject(this.serverNameTxt),this.serverNameTxt=null,this.serverInfo=null,t.prototype.dispose.call(this)},e}(LoadingBaseItemRenderer);__reflect(ServerItemMyRenderer.prototype,"ServerItemMyRenderer");;window.SmallLoading = SmallLoading;window.LoadingConst = LoadingConst;window.LoadingManager = LoadingManager; 